{"version":3,"file":"Init.js.map","sources":["Init.js"],"sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nimport { strUndefined } from \"@microsoft/applicationinsights-core-js\";\r\nimport { ApplicationInsightsContainer } from \"./ApplicationInsightsContainer\";\r\nimport { _DYN_VERSION } from \"./__DynamicConstants\";\r\n// ----------------------------------------------------------------------------------------------------\r\n// Exports available from the Cdn bundles\r\n// ----------------------------------------------------------------------------------------------------\r\nexport { Initialization as ApplicationInsights, Telemetry } from \"./Initialization\";\r\nexport { LoggingSeverity, PerfEvent, PerfManager, doPerf, CoreUtils, newId, newGuid, random32, randomValue, generateW3CId, findW3cTraceParent, findMetaTag, mergeEvtNamespace, eventOn, eventOff, addEventHandler, removeEventHandler, isBeaconsSupported } from \"@microsoft/applicationinsights-core-js\";\r\nexport { Util, RequestHeaders, DisabledPropertyName, DEFAULT_BREEZE_ENDPOINT, SeverityLevel, DistributedTracingModes, PropertiesPluginIdentifier, BreezeChannelIdentifier, AnalyticsPluginIdentifier } from \"@microsoft/applicationinsights-common\";\r\n// ----------------------------------------------------------------------------------------------------\r\n// End of Exports available from the Cdn bundles\r\n// ----------------------------------------------------------------------------------------------------\r\nfunction _logWarn(aiName, message) {\r\n    // TODO: Find better place to warn to console when SDK initialization fails\r\n    var _console = typeof console !== strUndefined ? console : null;\r\n    if (_console && _console.warn) {\r\n        _console.warn(\"Failed to initialize AppInsights JS SDK for instance \" + (aiName || \"<unknown>\") + \" - \" + message);\r\n    }\r\n}\r\n// should be global function that should load as soon as SDK loads\r\ntry {\r\n    // E2E sku on load initializes core and pipeline using snippet as input for configuration\r\n    // tslint:disable-next-line: no-var-keyword\r\n    var aiName;\r\n    if (typeof window !== strUndefined) {\r\n        var _window = window;\r\n        aiName = _window[\"appInsightsSDK\"] || \"appInsights\";\r\n        if (typeof JSON !== strUndefined) {\r\n            // get snippet or initialize to an empty object\r\n            if (_window[aiName] !== undefined) {\r\n                // this is the typical case for browser+snippet\r\n                var snippet = _window[aiName] || { version: 2.0 };\r\n                // overwrite snippet with full appInsights\r\n                // only initiaize if required and detected snippet version is >= 2 or not defined\r\n                if ((snippet[_DYN_VERSION /* @min:%2eversion */] >= 2 && _window[aiName].initialize) || snippet[_DYN_VERSION /* @min:%2eversion */] === undefined) {\r\n                    ApplicationInsightsContainer.getAppInsights(snippet, snippet[_DYN_VERSION /* @min:%2eversion */]);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _logWarn(aiName, \"Missing JSON - you must supply a JSON polyfill!\");\r\n        }\r\n    }\r\n    else {\r\n        _logWarn(aiName, \"Missing window\");\r\n    }\r\n    // Hack: If legacy SDK exists, skip this step (Microsoft.ApplicationInsights exists).\r\n    // else write what was there for v2 SDK prior to rollup bundle output name change.\r\n    // e.g Microsoft.ApplicationInsights.ApplicationInsights, Microsoft.ApplicationInsights.Telemetry\r\n    // @todo uncomment once integration tests for this can be added\r\n    // if (typeof window !== strUndefined && window && ((window as any).Microsoft && !(window as any).Microsoft.ApplicationInsights)) {\r\n    //     (window as any).Microsoft = (window as any).Microsoft || {};\r\n    //     (window as any).Microsoft.ApplicationInsights = {\r\n    //         ApplicationInsights, Telemetry\r\n    //     };\r\n    // }\r\n}\r\ncatch (e) {\r\n    _logWarn(aiName, e.message);\r\n}\r\n//# sourceMappingURL=Init.js.map"],"names":[],"mappings":";;;;AAA4D;AAC1B;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}