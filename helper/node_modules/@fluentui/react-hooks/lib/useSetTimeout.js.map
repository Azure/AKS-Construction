{"version":3,"file":"useSetTimeout.js","sourceRoot":"../src/","sources":["useSetTimeout.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AAOtC;;GAEG;AACH,MAAM,CAAC,IAAM,aAAa,GAAG;IAC3B,IAAM,UAAU,GAAG,QAAQ,CAAyB,EAAE,CAAC,CAAC;IAExD,oBAAoB;IACpB,KAAK,CAAC,SAAS,CACb,cAAM,OAAA;QACJ,KAAiB,UAAuB,EAAvB,KAAA,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EAAvB,cAAuB,EAAvB,IAAuB,EAAE;YAArC,IAAM,EAAE,SAAA;YACX,8DAA8D;YAC9D,YAAY,CAAC,EAAS,CAAC,CAAC;SACzB;IACH,CAAC,EALK,CAKL;IACD,6FAA6F;IAC7F,CAAC,UAAU,CAAC,CACb,CAAC;IAEF,0CAA0C;IAC1C,OAAO,QAAQ,CAAC;QACd,UAAU,EAAE,UAAC,IAAgB,EAAE,QAAgB;YAC7C,IAAM,EAAE,GAAI,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAuB,CAAC;YAE7D,UAAU,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;YAEnB,OAAO,EAAE,CAAC;QACZ,CAAC;QAED,YAAY,EAAE,UAAC,EAAU;YACvB,OAAO,UAAU,CAAC,EAAE,CAAC,CAAC;YACtB,YAAY,CAAC,EAAE,CAAC,CAAC;QACnB,CAAC;KACF,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["import * as React from 'react';\nimport { useConst } from './useConst';\n\nexport type UseSetTimeoutReturnType = {\n  setTimeout: (callback: () => void, duration: number) => number;\n  clearTimeout: (id: number) => void;\n};\n\n/**\n *  Returns a wrapper function for `setTimeout` which automatically handles disposal.\n */\nexport const useSetTimeout = (): UseSetTimeoutReturnType => {\n  const timeoutIds = useConst<Record<number, number>>({});\n\n  // Cleanup function.\n  React.useEffect(\n    () => () => {\n      for (const id of Object.keys(timeoutIds)) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        clearTimeout(id as any);\n      }\n    },\n    // useConst ensures this will never change, but react-hooks/exhaustive-deps doesn't know that\n    [timeoutIds],\n  );\n\n  // Return wrapper which will auto cleanup.\n  return useConst({\n    setTimeout: (func: () => void, duration: number): number => {\n      const id = (setTimeout(func, duration) as unknown) as number;\n\n      timeoutIds[id] = 1;\n\n      return id;\n    },\n\n    clearTimeout: (id: number): void => {\n      delete timeoutIds[id];\n      clearTimeout(id);\n    },\n  });\n};\n"]}