{"version":3,"file":"TeachingBubbleContent.base.js","sourceRoot":"../src/","sources":["components/TeachingBubble/TeachingBubbleContent.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { classNamesFunction, KeyCodes } from '../../Utilities';\nimport { PrimaryButton, DefaultButton, IconButton } from '../../Button';\nimport { Stack } from '../../Stack';\nimport { FocusTrapZone } from '../../FocusTrapZone';\nimport { Image } from '../../Image';\nimport { useOnEvent, useMergedRefs, useId } from '@fluentui/react-hooks';\nimport { useDocument } from '../../WindowProvider';\nimport type {\n  ITeachingBubbleProps,\n  ITeachingBubbleStyleProps,\n  ITeachingBubbleStyles,\n  ITeachingBubble,\n} from './TeachingBubble.types';\n\nconst getClassNames = classNamesFunction<ITeachingBubbleStyleProps, ITeachingBubbleStyles>();\n\nconst useComponentRef = (\n  componentRef: React.Ref<ITeachingBubble> | undefined,\n  rootElementRef: React.RefObject<HTMLDivElement>,\n) => {\n  React.useImperativeHandle(\n    componentRef,\n    () => ({\n      focus: () => rootElementRef.current?.focus(),\n    }),\n    [rootElementRef],\n  );\n};\n\nexport const TeachingBubbleContentBase: React.FunctionComponent<ITeachingBubbleProps> = React.forwardRef<\n  HTMLDivElement,\n  ITeachingBubbleProps\n>((props, forwardedRef) => {\n  const rootElementRef = React.useRef<HTMLDivElement>(null);\n  const documentRef = useDocument();\n  const mergedRootRef = useMergedRefs(rootElementRef, forwardedRef);\n\n  const ariaDescribedById = useId('teaching-bubble-content-');\n  const ariaLabelledById = useId('teaching-bubble-title-');\n\n  const ariaDescribedBy = props.ariaDescribedBy ?? ariaDescribedById;\n  const ariaLabelledBy = props.ariaLabelledBy ?? ariaLabelledById;\n\n  const {\n    illustrationImage,\n    primaryButtonProps,\n    secondaryButtonProps,\n    headline,\n    hasCondensedHeadline,\n    // eslint-disable-next-line deprecation/deprecation\n    hasCloseButton = props.hasCloseIcon,\n    onDismiss,\n    closeButtonAriaLabel,\n    hasSmallHeadline,\n    isWide,\n    styles,\n    theme,\n    footerContent: customFooterContent,\n    focusTrapZoneProps,\n  } = props;\n\n  const classNames = getClassNames(styles, {\n    theme: theme!,\n    hasCondensedHeadline,\n    hasSmallHeadline,\n    hasCloseButton,\n    hasHeadline: !!headline,\n    isWide,\n    primaryButtonClassName: primaryButtonProps ? primaryButtonProps.className : undefined,\n    secondaryButtonClassName: secondaryButtonProps ? secondaryButtonProps.className : undefined,\n  });\n\n  const onKeyDown = React.useCallback(\n    (ev: React.KeyboardEvent<HTMLElement> | KeyboardEvent): void => {\n      if (onDismiss) {\n        // eslint-disable-next-line deprecation/deprecation\n        if (ev.which === KeyCodes.escape) {\n          onDismiss(ev);\n        }\n      }\n    },\n    [onDismiss],\n  );\n\n  useOnEvent(documentRef, 'keydown', onKeyDown as (ev: Event) => void);\n\n  let imageContent: JSX.Element | undefined;\n  let headerContent: JSX.Element | undefined;\n  let bodyContent: JSX.Element | undefined;\n  let footerContent: JSX.Element | undefined;\n  let closeButton: JSX.Element | undefined;\n\n  if (illustrationImage && illustrationImage.src) {\n    imageContent = (\n      <div className={classNames.imageContent}>\n        <Image {...(illustrationImage as any)} />\n      </div>\n    );\n  }\n\n  if (headline) {\n    const HeaderWrapperAs = typeof headline === 'string' ? 'p' : 'div';\n\n    headerContent = (\n      <div className={classNames.header}>\n        <HeaderWrapperAs role=\"heading\" aria-level={3} className={classNames.headline} id={ariaLabelledBy}>\n          {headline}\n        </HeaderWrapperAs>\n      </div>\n    );\n  }\n\n  if (props.children) {\n    const BodyContentWrapperAs = typeof props.children === 'string' ? 'p' : 'div';\n\n    bodyContent = (\n      <div className={classNames.body}>\n        <BodyContentWrapperAs className={classNames.subText} id={ariaDescribedBy}>\n          {props.children}\n        </BodyContentWrapperAs>\n      </div>\n    );\n  }\n\n  if (primaryButtonProps || secondaryButtonProps || customFooterContent) {\n    footerContent = (\n      <Stack className={classNames.footer} horizontal horizontalAlign={customFooterContent ? 'space-between' : 'end'}>\n        <Stack.Item align=\"center\">{<span>{customFooterContent}</span>}</Stack.Item>\n        <Stack.Item>\n          {primaryButtonProps && <PrimaryButton {...primaryButtonProps} className={classNames.primaryButton} />}\n          {secondaryButtonProps && <DefaultButton {...secondaryButtonProps} className={classNames.secondaryButton} />}\n        </Stack.Item>\n      </Stack>\n    );\n  }\n\n  if (hasCloseButton) {\n    closeButton = (\n      <IconButton\n        className={classNames.closeButton}\n        iconProps={{ iconName: 'Cancel' }}\n        ariaLabel={closeButtonAriaLabel}\n        onClick={onDismiss}\n      />\n    );\n  }\n\n  useComponentRef(props.componentRef, rootElementRef);\n\n  return (\n    <div\n      className={classNames.content}\n      ref={mergedRootRef}\n      role={'dialog'}\n      tabIndex={-1}\n      aria-labelledby={ariaLabelledBy}\n      aria-describedby={ariaDescribedBy}\n      data-is-focusable\n    >\n      {imageContent}\n      <FocusTrapZone isClickableOutsideFocusTrap {...focusTrapZoneProps}>\n        <div className={classNames.bodyContent}>\n          {headerContent}\n          {bodyContent}\n          {footerContent}\n          {closeButton}\n        </div>\n      </FocusTrapZone>\n    </div>\n  );\n});\n"]}