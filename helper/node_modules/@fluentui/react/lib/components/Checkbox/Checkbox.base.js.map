{"version":3,"file":"Checkbox.base.js","sourceRoot":"../src/","sources":["components/Checkbox/Checkbox.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useControllableValue, useId, useMergedRefs, useWarnings } from '@fluentui/react-hooks';\nimport { useFocusRects, classNamesFunction } from '@fluentui/utilities';\nimport { Icon } from '../Icon/Icon';\nimport type { ICheckboxProps, ICheckboxStyleProps, ICheckboxStyles } from './Checkbox.types';\n\nconst getClassNames = classNamesFunction<ICheckboxStyleProps, ICheckboxStyles>();\n\nexport const CheckboxBase: React.FunctionComponent<ICheckboxProps> = React.forwardRef<HTMLDivElement, ICheckboxProps>(\n  (props, forwardedRef) => {\n    const {\n      disabled,\n      required,\n      inputProps,\n      name,\n      ariaLabel,\n      ariaLabelledBy,\n      ariaDescribedBy,\n      ariaPositionInSet,\n      ariaSetSize,\n      title,\n      checkmarkIconProps,\n      styles,\n      theme,\n      className,\n      boxSide = 'start',\n    } = props;\n\n    const id = useId('checkbox-', props.id);\n\n    const rootRef = React.useRef<HTMLDivElement | null>(null);\n    const mergedRootRefs: React.Ref<HTMLDivElement> = useMergedRefs(rootRef, forwardedRef);\n    const inputRef = React.useRef<HTMLInputElement>(null);\n\n    const [isChecked, setIsChecked] = useControllableValue(props.checked, props.defaultChecked, props.onChange);\n    const [isIndeterminate, setIsIndeterminate] = useControllableValue(props.indeterminate, props.defaultIndeterminate);\n\n    useFocusRects(rootRef);\n    useDebugWarning(props);\n\n    const classNames = getClassNames(styles!, {\n      theme: theme!,\n      className,\n      disabled,\n      indeterminate: isIndeterminate,\n      checked: isChecked,\n      reversed: boxSide !== 'start',\n      isUsingCustomLabelRender: !!props.onRenderLabel,\n    });\n\n    const onChange = React.useCallback(\n      (event: React.ChangeEvent<HTMLElement>): void => {\n        if (isIndeterminate) {\n          // If indeterminate, clicking the checkbox *only* removes the indeterminate state (or if\n          // controlled, lets the consumer know to change it by calling onChange). It doesn't\n          // change the checked state.\n          setIsChecked(!!isChecked, event);\n          setIsIndeterminate(false);\n        } else {\n          setIsChecked(!isChecked, event);\n        }\n      },\n      [setIsChecked, setIsIndeterminate, isIndeterminate, isChecked],\n    );\n\n    const defaultLabelRenderer = React.useCallback(\n      (checkboxProps?: ICheckboxProps): JSX.Element | null => {\n        if (!checkboxProps) {\n          return null;\n        }\n        return checkboxProps.label ? (\n          <span className={classNames.text} title={checkboxProps.title}>\n            {checkboxProps.label}\n          </span>\n        ) : null;\n      },\n      [classNames.text],\n    );\n\n    const setNativeIndeterminate = React.useCallback(\n      (indeterminate: boolean | undefined) => {\n        if (!inputRef.current) {\n          return;\n        }\n\n        const value = !!indeterminate;\n\n        inputRef.current.indeterminate = value;\n        setIsIndeterminate(value);\n      },\n      [setIsIndeterminate],\n    );\n\n    useComponentRef(props, isChecked, isIndeterminate, setNativeIndeterminate, inputRef);\n    React.useEffect(() => setNativeIndeterminate(isIndeterminate), [setNativeIndeterminate, isIndeterminate]);\n\n    const onRenderLabel = props.onRenderLabel || defaultLabelRenderer;\n\n    const ariaChecked: React.InputHTMLAttributes<HTMLInputElement>['aria-checked'] = isIndeterminate\n      ? 'mixed'\n      : undefined;\n\n    const mergedInputProps: React.InputHTMLAttributes<HTMLInputElement> = {\n      className: classNames.input,\n      type: 'checkbox' as React.InputHTMLAttributes<HTMLInputElement>['type'],\n      ...inputProps,\n      checked: !!isChecked,\n      disabled,\n      required,\n      name,\n      id,\n      title,\n      onChange,\n      'aria-disabled': disabled,\n      'aria-label': ariaLabel,\n      'aria-labelledby': ariaLabelledBy,\n      'aria-describedby': ariaDescribedBy,\n      'aria-posinset': ariaPositionInSet,\n      'aria-setsize': ariaSetSize,\n      'aria-checked': ariaChecked,\n    };\n\n    return (\n      <div className={classNames.root} title={title} ref={mergedRootRefs}>\n        <input {...mergedInputProps} ref={inputRef} title={title} data-ktp-execute-target={true} />\n        <label className={classNames.label} htmlFor={id}>\n          <div className={classNames.checkbox} data-ktp-target={true}>\n            <Icon iconName=\"CheckMark\" {...checkmarkIconProps} className={classNames.checkmark} />\n          </div>\n          {onRenderLabel(props, defaultLabelRenderer)}\n        </label>\n      </div>\n    );\n  },\n);\n\nCheckboxBase.displayName = 'CheckboxBase';\n\nfunction useDebugWarning(props: ICheckboxProps) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: 'Checkbox',\n      props,\n      mutuallyExclusive: {\n        checked: 'defaultChecked',\n        indeterminate: 'defaultIndeterminate',\n      },\n    });\n  }\n}\n\nfunction useComponentRef(\n  props: ICheckboxProps,\n  isChecked: boolean | undefined,\n  isIndeterminate: boolean | undefined,\n  setIndeterminate: (indeterminate: boolean) => void,\n  checkBoxRef: React.RefObject<HTMLInputElement>,\n) {\n  React.useImperativeHandle(\n    props.componentRef,\n    () => ({\n      get checked() {\n        return !!isChecked;\n      },\n      get indeterminate() {\n        return !!isIndeterminate;\n      },\n      set indeterminate(indeterminate: boolean) {\n        setIndeterminate(indeterminate);\n      },\n      focus() {\n        if (checkBoxRef.current) {\n          checkBoxRef.current.focus();\n        }\n      },\n    }),\n    [checkBoxRef, isChecked, isIndeterminate, setIndeterminate],\n  );\n}\n"]}