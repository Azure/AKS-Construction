{"version":3,"file":"PersonaPresence.base.js","sourceRoot":"../src/","sources":["components/Persona/PersonaPresence/PersonaPresence.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { classNamesFunction } from '../../../Utilities';\nimport { Icon } from '../../../Icon';\nimport { PersonaPresence as PersonaPresenceEnum, PersonaSize } from '../Persona.types';\nimport { sizeBoolean } from '../PersonaConsts';\nimport { useMergedRefs } from '@fluentui/react-hooks';\nimport type { IPersonaPresenceProps, IPersonaPresenceStyleProps, IPersonaPresenceStyles } from '../Persona.types';\n\nconst coinSizeFontScaleFactor = 6;\nconst coinSizePresenceScaleFactor = 3;\nconst presenceMaxSize = 40;\nconst presenceFontMaxSize = 20;\n\nconst getClassNames = classNamesFunction<IPersonaPresenceStyleProps, IPersonaPresenceStyles>({\n  // There can be many PersonaPresence rendered with different sizes.\n  // Therefore setting a larger cache size.\n  cacheSize: 100,\n});\n\n/**\n * PersonaPresence with no default styles.\n * [Use the `getStyles` API to add your own styles.](https://github.com/microsoft/fluentui/wiki/Styling)\n */\nexport const PersonaPresenceBase: React.FunctionComponent<IPersonaPresenceProps> = React.forwardRef<\n  HTMLDivElement,\n  IPersonaPresenceProps\n>((props, forwardedRef) => {\n  const {\n    coinSize,\n    isOutOfOffice,\n    styles, // Use getStyles from props.\n    presence,\n    theme,\n    presenceTitle,\n    presenceColors,\n  } = props;\n\n  const rootRef = React.useRef<HTMLDivElement>(null);\n  const mergedRootRef = useMergedRefs(forwardedRef, rootRef);\n\n  const size = sizeBoolean(props.size as PersonaSize);\n\n  // Render Presence Icon if Persona is above size 32.\n  const renderIcon =\n    !(size.isSize8 || size.isSize10 || size.isSize16 || size.isSize24 || size.isSize28 || size.isSize32) &&\n    (coinSize ? coinSize > 32 : true);\n\n  const presenceHeightWidth: string = coinSize\n    ? coinSize / coinSizePresenceScaleFactor < presenceMaxSize\n      ? coinSize / coinSizePresenceScaleFactor + 'px'\n      : presenceMaxSize + 'px'\n    : '';\n  const presenceFontSize: string = coinSize\n    ? coinSize / coinSizeFontScaleFactor < presenceFontMaxSize\n      ? coinSize / coinSizeFontScaleFactor + 'px'\n      : presenceFontMaxSize + 'px'\n    : '';\n  const coinSizeWithPresenceIconStyle = coinSize\n    ? { fontSize: presenceFontSize, lineHeight: presenceHeightWidth }\n    : undefined;\n  const coinSizeWithPresenceStyle = coinSize ? { width: presenceHeightWidth, height: presenceHeightWidth } : undefined;\n\n  // Use getStyles from props, or fall back to getStyles from styles file.\n  const classNames = getClassNames(styles, {\n    theme: theme!,\n    presence,\n    size: props.size,\n    isOutOfOffice,\n    presenceColors,\n  });\n\n  if (presence === PersonaPresenceEnum.none) {\n    return null;\n  }\n\n  return (\n    <div\n      role=\"presentation\"\n      className={classNames.presence}\n      style={coinSizeWithPresenceStyle}\n      title={presenceTitle}\n      ref={mergedRootRef}\n    >\n      {renderIcon && (\n        <Icon\n          className={classNames.presenceIcon}\n          iconName={determineIcon(props.presence, props.isOutOfOffice)}\n          style={coinSizeWithPresenceIconStyle}\n        />\n      )}\n    </div>\n  );\n});\nPersonaPresenceBase.displayName = 'PersonaPresenceBase';\n\nfunction determineIcon(\n  presence: PersonaPresenceEnum | undefined,\n  isOutOfOffice: boolean | undefined,\n): string | undefined {\n  if (!presence) {\n    return undefined;\n  }\n\n  const oofIcon = 'SkypeArrow';\n\n  switch (PersonaPresenceEnum[presence]) {\n    case 'online':\n      return 'SkypeCheck';\n    case 'away':\n      return isOutOfOffice ? oofIcon : 'SkypeClock';\n    case 'dnd':\n      return 'SkypeMinus';\n    case 'offline':\n      return isOutOfOffice ? oofIcon : '';\n  }\n\n  return '';\n}\n"]}