{"version":3,"file":"Persona.base.js","sourceRoot":"../src/","sources":["components/Persona/Persona.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { classNamesFunction, divProperties, getNativeProps, getPropsWithDefaults } from '../../Utilities';\nimport { TooltipHost, TooltipOverflowMode } from '../../Tooltip';\nimport { PersonaCoin } from './PersonaCoin/PersonaCoin';\nimport { PersonaPresence as PersonaPresenceEnum, PersonaSize } from './Persona.types';\nimport { useWarnings, useMergedRefs } from '@fluentui/react-hooks';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport type { IRenderFunction } from '../../Utilities';\nimport type { IPersonaProps, IPersonaStyleProps, IPersonaStyles, IPersonaCoinProps } from './Persona.types';\n\nconst getClassNames = classNamesFunction<IPersonaStyleProps, IPersonaStyles>();\n\nconst DEFAULT_PROPS = {\n  size: PersonaSize.size48,\n  presence: PersonaPresenceEnum.none,\n  imageAlt: '',\n  showOverflowTooltip: true,\n};\n\nfunction useDebugWarnings(props: IPersonaProps) {\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks -- build-time conditional\n    useWarnings({\n      name: 'Persona',\n      props,\n      deprecations: { primaryText: 'text' },\n    });\n  }\n}\n\n/**\n * Persona with no default styles.\n * [Use the `styles` API to add your own styles.](https://github.com/microsoft/fluentui/wiki/Styling)\n */\nexport const PersonaBase: React.FunctionComponent<IPersonaProps> = React.forwardRef<HTMLDivElement, IPersonaProps>(\n  (propsWithoutDefaults, forwardedRef) => {\n    const props = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n\n    useDebugWarnings(props);\n    const rootRef = React.useRef<HTMLDivElement>(null);\n    const mergedRootRef = useMergedRefs(forwardedRef, rootRef);\n\n    /**\n     * Deprecation helper for getting text.\n     */\n    const getText = (): string => {\n      // eslint-disable-next-line deprecation/deprecation\n      return props.text || props.primaryText || '';\n    };\n\n    /**\n     * Renders various types of Text (primaryText, secondaryText, etc)\n     * based on the classNames passed\n     * @param elementClassNames - element className\n     * @param renderFunction - render function\n     * @param defaultRenderFunction - default render function\n     */\n    const renderElement = (\n      elementClassNames: string,\n      renderFunction: IRenderFunction<IPersonaProps> | undefined,\n      defaultRenderFunction: IRenderFunction<IPersonaProps> | undefined,\n    ): JSX.Element | undefined => {\n      const content = renderFunction && renderFunction(props, defaultRenderFunction);\n      return content ? (\n        <div dir=\"auto\" className={elementClassNames}>\n          {content}\n        </div>\n      ) : undefined;\n    };\n\n    /**\n     * using closure to wrap the default render behavior\n     * to make it independent of the type of text passed\n     * @param text - text to render\n     */\n    const onRenderText = (text: string | undefined, tooltip = true): IRenderFunction<IPersonaProps> | undefined => {\n      // return default render behavior for valid text or undefined\n      return text\n        ? tooltip\n          ? (): JSX.Element => {\n              // default onRender behavior\n              return (\n                <TooltipHost\n                  content={text}\n                  overflowMode={TooltipOverflowMode.Parent}\n                  directionalHint={DirectionalHint.topLeftEdge}\n                >\n                  {text}\n                </TooltipHost>\n              );\n            }\n          : () => <>{text}</>\n        : undefined;\n    };\n\n    const onInternalRenderPersonaCoin = (providedCoinProps: IPersonaCoinProps): JSX.Element | null => {\n      return <PersonaCoin {...providedCoinProps} />;\n    };\n\n    // wrapping default render behavior based on various props properties\n    const onInternalRenderPrimaryText = onRenderText(getText(), props.showOverflowTooltip);\n    const onInternalRenderSecondaryText = onRenderText(props.secondaryText, props.showOverflowTooltip);\n    const onInternalRenderTertiaryText = onRenderText(props.tertiaryText, props.showOverflowTooltip);\n    const onInternalRenderOptionalText = onRenderText(props.optionalText, props.showOverflowTooltip);\n\n    const {\n      hidePersonaDetails,\n      onRenderOptionalText = onInternalRenderOptionalText,\n      onRenderPrimaryText = onInternalRenderPrimaryText,\n      onRenderSecondaryText = onInternalRenderSecondaryText,\n      onRenderTertiaryText = onInternalRenderTertiaryText,\n      onRenderPersonaCoin = onInternalRenderPersonaCoin,\n    } = props;\n    const size = props.size as PersonaSize;\n\n    // These properties are to be explicitly passed into PersonaCoin because they are the only props directly used\n    const {\n      allowPhoneInitials,\n      className,\n      coinProps,\n      showUnknownPersonaCoin,\n      coinSize,\n      styles,\n      imageAlt,\n      imageInitials,\n      imageShouldFadeIn,\n      imageShouldStartVisible,\n      imageUrl,\n      initialsColor,\n      initialsTextColor,\n      isOutOfOffice,\n      onPhotoLoadingStateChange,\n      // eslint-disable-next-line deprecation/deprecation\n      onRenderCoin,\n      onRenderInitials,\n      presence,\n      presenceTitle,\n      presenceColors,\n      showInitialsUntilImageLoads,\n      showSecondaryText,\n      theme,\n    } = props;\n\n    const personaCoinProps: IPersonaCoinProps = {\n      allowPhoneInitials,\n      showUnknownPersonaCoin,\n      coinSize,\n      imageAlt,\n      imageInitials,\n      imageShouldFadeIn,\n      imageShouldStartVisible,\n      imageUrl,\n      initialsColor,\n      initialsTextColor,\n      onPhotoLoadingStateChange,\n      onRenderCoin,\n      onRenderInitials,\n      presence,\n      presenceTitle,\n      showInitialsUntilImageLoads,\n      size,\n      text: getText(),\n      isOutOfOffice,\n      presenceColors,\n      ...coinProps,\n    };\n\n    const classNames = getClassNames(styles, {\n      theme: theme!,\n      className,\n      showSecondaryText,\n      presence,\n      size,\n    });\n\n    const divProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(props, divProperties);\n    const personaDetails = (\n      <div className={classNames.details}>\n        {renderElement(classNames.primaryText, onRenderPrimaryText, onInternalRenderPrimaryText)}\n        {renderElement(classNames.secondaryText, onRenderSecondaryText, onInternalRenderSecondaryText)}\n        {renderElement(classNames.tertiaryText, onRenderTertiaryText, onInternalRenderTertiaryText)}\n        {renderElement(classNames.optionalText, onRenderOptionalText, onInternalRenderOptionalText)}\n        {props.children}\n      </div>\n    );\n    return (\n      <div\n        {...divProps}\n        ref={mergedRootRef}\n        className={classNames.root}\n        style={coinSize ? { height: coinSize, minWidth: coinSize } : undefined}\n      >\n        {onRenderPersonaCoin(personaCoinProps, onRenderPersonaCoin)}\n        {\n          /* eslint-disable deprecation/deprecation */\n\n          (!hidePersonaDetails ||\n            size === PersonaSize.size8 ||\n            size === PersonaSize.size10 ||\n            size === PersonaSize.tiny) &&\n            personaDetails\n          /* eslint-enable deprecation/deprecation */\n        }\n      </div>\n    );\n  },\n);\nPersonaBase.displayName = 'PersonaBase';\n"]}