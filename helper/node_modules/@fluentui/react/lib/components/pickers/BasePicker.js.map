{"version":3,"file":"BasePicker.js","sourceRoot":"../src/","sources":["components/pickers/BasePicker.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Async,\n  KeyCodes,\n  css,\n  elementContains,\n  format,\n  getId,\n  classNamesFunction,\n  styled,\n  initializeComponentRef,\n} from '../../Utilities';\nimport { Callout } from '../../Callout';\nimport { Selection, SelectionZone, SelectionMode } from '../../utilities/selection/index';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { Suggestions } from './Suggestions/Suggestions';\nimport { getStyles as suggestionsStyles } from './Suggestions/Suggestions.styles';\nimport { SuggestionsController } from './Suggestions/SuggestionsController';\nimport { ValidationState } from './BasePicker.types';\nimport { Autofill } from '../Autofill/index';\nimport * as stylesImport from './BasePicker.scss';\nimport type { IProcessedStyleSet } from '../../Styling';\nimport type {\n  ISuggestions,\n  ISuggestionsProps,\n  ISuggestionsStyleProps,\n  ISuggestionsStyles,\n} from './Suggestions/Suggestions.types';\nimport type { IBasePicker, IBasePickerProps, IBasePickerStyleProps, IBasePickerStyles } from './BasePicker.types';\nimport type { IAutofill } from '../Autofill/index';\nimport type { IPickerItemProps } from './PickerItem.types';\n\nconst legacyStyles: any = stylesImport;\n\nconst EXTENDED_LOAD_TIME = 3000;\n\nexport interface IBasePickerState<T> {\n  items?: any;\n  suggestedDisplayValue?: string;\n  moreSuggestionsAvailable?: boolean;\n  isFocused?: boolean;\n  isSearching?: boolean;\n  isMostRecentlyUsedVisible?: boolean;\n  suggestionsVisible?: boolean;\n  suggestionsLoading?: boolean;\n  suggestionsExtendedLoading?: boolean;\n  isResultsFooterVisible?: boolean;\n  selectedIndices?: number[];\n  selectionRemoved?: T;\n}\n\n/**\n * Aria id's for internal picker components\n * {@docCategory Pickers}\n */\nexport type IPickerAriaIds = {\n  /**\n   * Aria id for selected suggestion alert component\n   */\n  selectedSuggestionAlert: string;\n  /**\n   * Aria id for selected items container component\n   */\n  selectedItems: string;\n  /**\n   * Aria id for suggestions list component\n   */\n  suggestionList: string;\n  /**\n   * Aria id for element with role=combobox\n   */\n  combobox: string;\n};\n\nconst getClassNames = classNamesFunction<IBasePickerStyleProps, IBasePickerStyles>();\n\n/**\n * Should be removed once new picker without inheritance is created\n */\nfunction getStyledSuggestions<T>(suggestionsType: new (props: ISuggestionsProps<T>) => Suggestions<T>) {\n  return styled<ISuggestionsProps<any>, ISuggestionsStyleProps, ISuggestionsStyles>(\n    suggestionsType,\n    suggestionsStyles,\n    undefined,\n    {\n      scope: 'Suggestions',\n    },\n  );\n}\n\n/**\n * {@docCategory Pickers}\n */\nexport class BasePicker<T, P extends IBasePickerProps<T>>\n  extends React.Component<P, IBasePickerState<T>>\n  implements IBasePicker<T> {\n  // Refs\n  protected root = React.createRef<HTMLDivElement>();\n  protected input = React.createRef<IAutofill>();\n  protected suggestionElement = React.createRef<ISuggestions<T>>();\n  protected selection: Selection;\n  protected suggestionStore: SuggestionsController<T>;\n  /**\n   * @deprecated this is no longer necessary as typescript now supports generic elements\n   */\n  protected SuggestionOfProperType = Suggestions as new (props: ISuggestionsProps<T>) => Suggestions<T>;\n  protected currentPromise: PromiseLike<any> | undefined;\n  protected _ariaMap: IPickerAriaIds;\n  // eslint-disable-next-line deprecation/deprecation\n  private _styledSuggestions = getStyledSuggestions(this.SuggestionOfProperType);\n  private _id: string;\n  private _async: Async;\n\n  public static getDerivedStateFromProps(newProps: IBasePickerProps<any>) {\n    if (newProps.selectedItems) {\n      return { items: newProps.selectedItems };\n    }\n    return null;\n  }\n\n  constructor(basePickerProps: P) {\n    super(basePickerProps);\n\n    initializeComponentRef(this);\n    this._async = new Async(this);\n\n    const items: T[] = basePickerProps.selectedItems || basePickerProps.defaultSelectedItems || [];\n\n    this._id = getId();\n    this._ariaMap = {\n      selectedItems: `selected-items-${this._id}`,\n      selectedSuggestionAlert: `selected-suggestion-alert-${this._id}`,\n      suggestionList: `suggestion-list-${this._id}`,\n      combobox: `combobox-${this._id}`,\n    };\n    this.suggestionStore = new SuggestionsController<T>();\n    this.selection = new Selection({ onSelectionChanged: () => this.onSelectionChange() });\n    this.selection.setItems(items);\n    this.state = {\n      items,\n      suggestedDisplayValue: '',\n      isMostRecentlyUsedVisible: false,\n      moreSuggestionsAvailable: false,\n      isFocused: false,\n      isSearching: false,\n      selectedIndices: [],\n      selectionRemoved: undefined,\n    };\n  }\n\n  public get items(): T[] {\n    return this.state.items;\n  }\n\n  public componentDidMount(): void {\n    this.selection.setItems(this.state.items);\n    this._onResolveSuggestions = this._async.debounce(this._onResolveSuggestions, this.props.resolveDelay);\n  }\n\n  public componentDidUpdate(oldProps: P, oldState: IBasePickerState<T>) {\n    if (this.state.items && this.state.items !== oldState.items) {\n      const currentSelectedIndex = this.selection.getSelectedIndices()[0];\n      this.selection.setItems(this.state.items);\n      if (this.state.isFocused) {\n        // Reset focus and selection so that selected item stays in sync if something\n        // has been removed\n        if (this.state.items.length < oldState.items.length) {\n          this.selection.setIndexSelected(currentSelectedIndex, false, true);\n          this.resetFocus(currentSelectedIndex);\n        }\n        // Reset focus to last item if the input is removed\n        else if (this.state.items.length > oldState.items.length && !this.canAddItems()) {\n          this.resetFocus(this.state.items.length - 1);\n        }\n      }\n    }\n  }\n\n  public componentWillUnmount(): void {\n    if (this.currentPromise) {\n      this.currentPromise = undefined;\n    }\n    this._async.dispose();\n  }\n\n  public focus() {\n    if (this.input.current) {\n      this.input.current.focus();\n    }\n  }\n\n  public focusInput() {\n    if (this.input.current) {\n      this.input.current.focus();\n    }\n  }\n\n  public dismissSuggestions = (ev?: any): void => {\n    const selectItemFunction = () => {\n      let addItemOnDismiss: boolean | void = true;\n      if (this.props.onDismiss) {\n        addItemOnDismiss = this.props.onDismiss(\n          ev,\n          this.suggestionStore.currentSuggestion ? this.suggestionStore.currentSuggestion.item : undefined,\n        );\n      }\n\n      if (!ev || (ev && !ev.defaultPrevented)) {\n        // Select the first suggestion if one is available and permitted by onDismiss when user leaves.\n        if (\n          addItemOnDismiss !== false &&\n          this.canAddItems() &&\n          this.suggestionStore.hasSelectedSuggestion() &&\n          this.state.suggestedDisplayValue\n        ) {\n          this.addItemByIndex(0);\n        }\n      }\n    };\n\n    if (this.currentPromise) {\n      this.currentPromise.then(() => selectItemFunction());\n    } else {\n      selectItemFunction();\n    }\n\n    this.setState({ suggestionsVisible: false });\n  };\n\n  public completeSuggestion(forceComplete?: boolean) {\n    if (this.suggestionStore.hasSelectedSuggestion() && this.input.current) {\n      this.completeSelection(this.suggestionStore.currentSuggestion!.item);\n    } else if (forceComplete) {\n      this._completeGenericSuggestion();\n    }\n  }\n\n  public refocusSuggestions = (keyCode: KeyCodes): void => {\n    this.resetFocus();\n    if (this.suggestionStore.suggestions && this.suggestionStore.suggestions.length > 0) {\n      if (keyCode === KeyCodes.up) {\n        this.suggestionStore.setSelectedSuggestion(this.suggestionStore.suggestions.length - 1);\n      } else if (keyCode === KeyCodes.down) {\n        this.suggestionStore.setSelectedSuggestion(0);\n      }\n    }\n  };\n\n  public render(): JSX.Element {\n    const { suggestedDisplayValue, isFocused, items } = this.state;\n    const { className, inputProps, disabled, selectionAriaLabel, selectionRole = 'list', theme, styles } = this.props;\n\n    const suggestionsVisible = !!this.state.suggestionsVisible;\n    const suggestionsAvailable = suggestionsVisible ? this._ariaMap.suggestionList : undefined;\n    // TODO\n    // Clean this up by leaving only the first part after removing support for SASS.\n    // Currently we can not remove the SASS styles from BasePicker class because it\n    // might be used by consumers who created custom pickers from extending from\n    // this base class and have not used the new 'styles' prop.\n    // We check for 'styles' prop which is going to be injected by the 'styled' HOC\n    // for every other already existing picker variant (PeoplePicker, TagPicker)\n    // so that we can use the CSS-in-JS styles. If the check fails (ex: custom picker),\n    // then we just use the old SASS styles instead.\n    const classNames: Partial<IProcessedStyleSet<IBasePickerStyles>> = styles\n      ? getClassNames(styles, {\n          theme,\n          className,\n          isFocused,\n          disabled,\n          inputClassName: inputProps && inputProps.className,\n        })\n      : {\n          root: css('ms-BasePicker', className ? className : ''),\n          text: css('ms-BasePicker-text', legacyStyles.pickerText, this.state.isFocused && legacyStyles.inputFocused),\n          itemsWrapper: legacyStyles.pickerItems,\n          input: css('ms-BasePicker-input', legacyStyles.pickerInput, inputProps && inputProps.className),\n          screenReaderText: legacyStyles.screenReaderOnly,\n        };\n\n    const comboLabel = this.props['aria-label'] || inputProps?.['aria-label'];\n\n    // selectionAriaLabel is contained in a separate <span> rather than an aria-label on the items list\n    // because if the items list has an aria-label, the aria-describedby on the input will only read\n    // that label instead of all the selected items. Using aria-labelledby instead fixes this, since\n    // aria-describedby and aria-labelledby will not follow a second aria-labelledby\n    return (\n      <div\n        ref={this.root}\n        className={classNames.root}\n        onKeyDown={this.onKeyDown}\n        onFocus={this.onFocus}\n        onBlur={this.onBlur}\n        onClick={this.onWrapperClick}\n      >\n        {this.renderCustomAlert(classNames.screenReaderText)}\n        <span id={`${this._ariaMap.selectedItems}-label`} hidden>\n          {selectionAriaLabel || comboLabel}\n        </span>\n        <SelectionZone selection={this.selection} selectionMode={SelectionMode.multiple}>\n          <div className={classNames.text} aria-owns={suggestionsAvailable}>\n            {items.length > 0 && (\n              <span\n                id={this._ariaMap.selectedItems}\n                className={classNames.itemsWrapper}\n                role={selectionRole}\n                aria-labelledby={`${this._ariaMap.selectedItems}-label`}\n              >\n                {this.renderItems()}\n              </span>\n            )}\n            {this.canAddItems() && (\n              <Autofill\n                spellCheck={false}\n                {...(inputProps as any)}\n                className={classNames.input}\n                componentRef={this.input}\n                id={inputProps?.id ? inputProps.id : this._ariaMap.combobox}\n                onClick={this.onClick}\n                onFocus={this.onInputFocus}\n                onBlur={this.onInputBlur}\n                onInputValueChange={this.onInputChange}\n                suggestedDisplayValue={suggestedDisplayValue}\n                aria-activedescendant={suggestionsVisible ? this.getActiveDescendant() : undefined}\n                aria-controls={suggestionsAvailable}\n                aria-describedby={items.length > 0 ? this._ariaMap.selectedItems : undefined}\n                aria-expanded={suggestionsVisible}\n                aria-haspopup=\"listbox\"\n                aria-label={comboLabel}\n                role=\"combobox\"\n                disabled={disabled}\n                onInputChange={this.props.onInputChange}\n              />\n            )}\n          </div>\n        </SelectionZone>\n        {this.renderSuggestions()}\n      </div>\n    );\n  }\n\n  protected canAddItems(): boolean {\n    const { items } = this.state;\n    const { itemLimit } = this.props;\n    return itemLimit === undefined || items.length < itemLimit;\n  }\n\n  protected renderSuggestions(): JSX.Element | null {\n    const StyledTypedSuggestions: React.FunctionComponent<ISuggestionsProps<T>> = this._styledSuggestions;\n\n    return this.state.suggestionsVisible && this.input ? (\n      <Callout\n        isBeakVisible={false}\n        gapSpace={5}\n        target={this.input.current ? this.input.current.inputElement : undefined}\n        onDismiss={this.dismissSuggestions}\n        directionalHint={DirectionalHint.bottomLeftEdge}\n        directionalHintForRTL={DirectionalHint.bottomRightEdge}\n        {...this.props.pickerCalloutProps}\n      >\n        <StyledTypedSuggestions\n          // Assumed to set in derived component's defaultProps\n          onRenderSuggestion={this.props.onRenderSuggestionsItem!}\n          onSuggestionClick={this.onSuggestionClick}\n          onSuggestionRemove={this.onSuggestionRemove}\n          suggestions={this.suggestionStore.getSuggestions()}\n          componentRef={this.suggestionElement}\n          onGetMoreResults={this.onGetMoreResults}\n          moreSuggestionsAvailable={this.state.moreSuggestionsAvailable}\n          isLoading={this.state.suggestionsLoading}\n          isExtendedLoading={this.state.suggestionsExtendedLoading}\n          isSearching={this.state.isSearching}\n          isMostRecentlyUsedVisible={this.state.isMostRecentlyUsedVisible}\n          isResultsFooterVisible={this.state.isResultsFooterVisible}\n          refocusSuggestions={this.refocusSuggestions}\n          removeSuggestionAriaLabel={this.props.removeButtonAriaLabel}\n          suggestionsListId={this._ariaMap.suggestionList}\n          createGenericItem={this._completeGenericSuggestion}\n          {...this.props.pickerSuggestionsProps}\n        />\n      </Callout>\n    ) : null;\n  }\n\n  protected renderItems(): JSX.Element[] {\n    const { disabled, removeButtonAriaLabel, removeButtonIconProps } = this.props;\n    const onRenderItem = this.props.onRenderItem as (props: IPickerItemProps<T>) => JSX.Element;\n\n    const { items, selectedIndices } = this.state;\n    return items.map((item: any, index: number) =>\n      onRenderItem({\n        item,\n        index,\n        key: item.key ? item.key : index,\n        selected: selectedIndices!.indexOf(index) !== -1,\n        onRemoveItem: () => this.removeItem(item),\n        disabled,\n        onItemChange: this.onItemChange,\n        removeButtonAriaLabel,\n        removeButtonIconProps,\n      }),\n    );\n  }\n\n  protected resetFocus(index?: number) {\n    const { items } = this.state;\n\n    if (items.length && index! >= 0) {\n      const newEl: HTMLElement | null =\n        this.root.current &&\n        (this.root.current.querySelectorAll('[data-selection-index]')[\n          Math.min(index!, items.length - 1)\n        ] as HTMLElement | null);\n      if (newEl) {\n        newEl.focus();\n      }\n    } else if (items.length && !this.canAddItems()) {\n      this.resetFocus(items.length - 1);\n    } else {\n      if (this.input.current) {\n        this.input.current.focus();\n      }\n    }\n  }\n\n  protected onSuggestionSelect() {\n    if (this.suggestionStore.currentSuggestion) {\n      const currentValue: string = this.input.current ? this.input.current.value : '';\n      const itemValue: string = this._getTextFromItem(this.suggestionStore.currentSuggestion.item, currentValue);\n      this.setState({ suggestedDisplayValue: itemValue });\n    }\n  }\n\n  protected onSelectionChange() {\n    this.setState({\n      selectedIndices: this.selection.getSelectedIndices(),\n    });\n  }\n\n  protected updateSuggestions(suggestions: any[]) {\n    const maxSuggestionsCount = this.props.pickerSuggestionsProps?.resultsMaximumNumber;\n    this.suggestionStore.updateSuggestions(suggestions, 0, maxSuggestionsCount);\n    this.forceUpdate();\n  }\n\n  /**\n   * Only to be called when there is nothing in the input. Checks to see if the consumer has\n   * provided a function to resolve suggestions\n   */\n  protected onEmptyInputFocus() {\n    const emptyResolveSuggestions = this.props.onEmptyResolveSuggestions\n      ? this.props.onEmptyResolveSuggestions\n      : // eslint-disable-next-line deprecation/deprecation\n        this.props.onEmptyInputFocus;\n\n    // Only attempt to resolve suggestions if it exists\n    if (emptyResolveSuggestions) {\n      const suggestions = emptyResolveSuggestions(this.state.items);\n\n      this.updateSuggestionsList(suggestions);\n\n      this.setState({\n        isMostRecentlyUsedVisible: true,\n        suggestionsVisible: true,\n        moreSuggestionsAvailable: false,\n      });\n    }\n  }\n\n  protected updateValue(updatedValue: string) {\n    this._onResolveSuggestions(updatedValue);\n  }\n\n  protected updateSuggestionsList(suggestions: T[] | PromiseLike<T[]>, updatedValue?: string) {\n    // Check to see if the returned value is an array, if it is then just pass it into the next function .\n    // If the returned value is not an array then check to see if it's a promise or PromiseLike.\n    // If it is then resolve it asynchronously.\n    if (Array.isArray(suggestions)) {\n      this._updateAndResolveValue(updatedValue, suggestions);\n    } else if (suggestions && (suggestions as PromiseLike<T[]>).then) {\n      this.setState({\n        suggestionsLoading: true,\n      });\n      this._startLoadTimer();\n\n      // Clear suggestions\n      this.suggestionStore.updateSuggestions([]);\n\n      if (updatedValue !== undefined) {\n        this.setState({\n          suggestionsVisible: this._getShowSuggestions(),\n        });\n      } else {\n        this.setState({\n          suggestionsVisible: this.input.current! && this.input.current!.inputElement === document.activeElement,\n        });\n      }\n\n      // Ensure that the promise will only use the callback if it was the most recent one.\n      this.currentPromise = suggestions;\n      suggestions.then((newSuggestions: T[]) => {\n        if (suggestions === this.currentPromise) {\n          this._updateAndResolveValue(updatedValue, newSuggestions);\n        }\n      });\n    }\n  }\n\n  protected resolveNewValue(updatedValue: string, suggestions: T[]) {\n    this.updateSuggestions(suggestions);\n    let itemValue: string | undefined = undefined;\n\n    if (this.suggestionStore.currentSuggestion) {\n      itemValue = this._getTextFromItem(this.suggestionStore.currentSuggestion.item, updatedValue);\n    }\n\n    // Only set suggestionloading to false after there has been time for the new suggestions to flow\n    // to the suggestions list. This is to ensure that the suggestions are available before aria-activedescendant\n    // is set so that screen readers will read out the first selected option.\n    this.setState(\n      {\n        suggestedDisplayValue: itemValue,\n        suggestionsVisible: this._getShowSuggestions(),\n      },\n      () => this.setState({ suggestionsLoading: false, suggestionsExtendedLoading: false }),\n    );\n  }\n\n  protected onChange(items?: T[]) {\n    if (this.props.onChange) {\n      (this.props.onChange as any)(items);\n    }\n  }\n\n  protected onInputChange = (value: string): void => {\n    this.updateValue(value);\n    this.setState({\n      moreSuggestionsAvailable: true,\n      isMostRecentlyUsedVisible: false,\n    });\n  };\n\n  protected onSuggestionClick = (ev: React.MouseEvent<HTMLElement>, item: any, index: number): void => {\n    this.addItemByIndex(index);\n  };\n\n  protected onSuggestionRemove = (ev: React.MouseEvent<HTMLElement>, item: T, index: number): void => {\n    if (this.props.onRemoveSuggestion) {\n      this.props.onRemoveSuggestion(item);\n    }\n    this.suggestionStore.removeSuggestion(index);\n  };\n\n  protected onInputFocus = (ev: React.FocusEvent<HTMLInputElement | Autofill>): void => {\n    this.selection.setAllSelected(false);\n    // Only trigger all of the focus if this component isn't already focused.\n    // For example when an item is selected or removed from the selected list it should be treated\n    // as though the input is still focused.\n    if (!this.state.isFocused) {\n      this._userTriggeredSuggestions();\n\n      if (this.props.inputProps && this.props.inputProps.onFocus) {\n        this.props.inputProps.onFocus(ev as React.FocusEvent<HTMLInputElement>);\n      }\n    }\n  };\n\n  protected onInputBlur = (ev: React.FocusEvent<HTMLInputElement | Autofill>): void => {\n    if (this.props.inputProps && this.props.inputProps.onBlur) {\n      this.props.inputProps.onBlur(ev as React.FocusEvent<HTMLInputElement>);\n    }\n  };\n\n  protected onBlur = (ev: React.FocusEvent<HTMLElement | Autofill>): void => {\n    if (this.state.isFocused) {\n      // Only blur the entire component if an unrelated element gets focus.\n      // Otherwise treat it as though it still has focus.\n      // Do nothing if the blur is coming from something\n      // inside the comboBox root or the comboBox menu since\n      // it we are not really bluring from the whole comboBox\n      let relatedTarget: EventTarget | null = ev.relatedTarget;\n\n      if (ev.relatedTarget === null) {\n        // In IE11, due to lack of support, event.relatedTarget is always\n        // null making every onBlur call to be \"outside\" of the ComboBox\n        // even when it's not. Using document.activeElement is another way\n        // for us to be able to get what the relatedTarget without relying\n        // on the event\n        relatedTarget = document.activeElement;\n      }\n      if (relatedTarget && !elementContains(this.root.current!, relatedTarget as HTMLElement)) {\n        this.setState({ isFocused: false });\n        if (this.props.onBlur) {\n          this.props.onBlur(ev as React.FocusEvent<HTMLInputElement>);\n        }\n      }\n    }\n  };\n\n  /**\n   * Resets focus to last element in wrapper div if clicking back into Picker that has hit item limit\n   */\n  protected onWrapperClick = (ev: React.MouseEvent<HTMLInputElement>): void => {\n    if (this.state.items.length && !this.canAddItems()) {\n      this.resetFocus(this.state.items.length - 1);\n    }\n  };\n\n  /**\n   * Reveals suggestions any time the user clicks on the input element\n   * without shifting focus.\n   */\n  protected onClick = (ev: React.MouseEvent<HTMLInputElement>): void => {\n    if (this.props.inputProps !== undefined && this.props.inputProps.onClick !== undefined) {\n      this.props.inputProps.onClick(ev);\n    }\n\n    // Only primary (left) clicks show suggestions.\n    if (ev.button === 0) {\n      this._userTriggeredSuggestions();\n    }\n  };\n\n  protected onFocus = () => {\n    if (!this.state.isFocused) {\n      this.setState({ isFocused: true });\n    }\n  };\n\n  protected onKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\n    // eslint-disable-next-line deprecation/deprecation\n    const keyCode = ev.which;\n    switch (keyCode) {\n      case KeyCodes.escape:\n        if (this.state.suggestionsVisible) {\n          this.setState({ suggestionsVisible: false });\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n        break;\n\n      case KeyCodes.tab:\n      case KeyCodes.enter:\n        if (this.suggestionElement.current && this.suggestionElement.current.hasSuggestedActionSelected()) {\n          this.suggestionElement.current.executeSelectedAction();\n        } else if (!ev.shiftKey && this.suggestionStore.hasSelectedSuggestion() && this.state.suggestionsVisible) {\n          this.completeSuggestion();\n          ev.preventDefault();\n          ev.stopPropagation();\n        } else {\n          this._completeGenericSuggestion();\n        }\n\n        break;\n\n      case KeyCodes.backspace:\n        if (!this.props.disabled) {\n          this.onBackspace(ev);\n        }\n        ev.stopPropagation();\n        break;\n\n      case KeyCodes.del:\n        if (!this.props.disabled) {\n          if (\n            this.input.current &&\n            ev.target === this.input.current.inputElement &&\n            this.state.suggestionsVisible &&\n            this.suggestionStore.currentIndex !== -1\n          ) {\n            if (this.props.onRemoveSuggestion) {\n              this.props.onRemoveSuggestion(this.suggestionStore.currentSuggestion!.item);\n            }\n            this.suggestionStore.removeSuggestion(this.suggestionStore.currentIndex);\n            this.forceUpdate();\n          } else {\n            this.onBackspace(ev);\n          }\n        }\n        ev.stopPropagation();\n        break;\n\n      case KeyCodes.up:\n        if (this.input.current && ev.target === this.input.current.inputElement && this.state.suggestionsVisible) {\n          if (\n            this.suggestionElement.current &&\n            this.suggestionElement.current.tryHandleKeyDown(keyCode, this.suggestionStore.currentIndex)\n          ) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            this.forceUpdate();\n          } else {\n            if (\n              this.suggestionElement.current &&\n              this.suggestionElement.current.hasSuggestedAction() &&\n              this.suggestionStore.currentIndex === 0\n            ) {\n              ev.preventDefault();\n              ev.stopPropagation();\n              this.suggestionElement.current.focusAboveSuggestions();\n              this.suggestionStore.deselectAllSuggestions();\n              this.forceUpdate();\n            } else {\n              if (this.suggestionStore.previousSuggestion()) {\n                ev.preventDefault();\n                ev.stopPropagation();\n                this.onSuggestionSelect();\n              }\n            }\n          }\n        }\n        break;\n\n      case KeyCodes.down:\n        if (this.input.current && ev.target === this.input.current.inputElement && this.state.suggestionsVisible) {\n          if (\n            this.suggestionElement.current &&\n            this.suggestionElement.current.tryHandleKeyDown(keyCode, this.suggestionStore.currentIndex)\n          ) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            this.forceUpdate();\n          } else {\n            if (\n              this.suggestionElement.current &&\n              this.suggestionElement.current.hasSuggestedAction() &&\n              this.suggestionStore.currentIndex + 1 === this.suggestionStore.suggestions.length\n            ) {\n              ev.preventDefault();\n              ev.stopPropagation();\n              this.suggestionElement.current.focusBelowSuggestions();\n              this.suggestionStore.deselectAllSuggestions();\n              this.forceUpdate();\n            } else {\n              if (this.suggestionStore.nextSuggestion()) {\n                ev.preventDefault();\n                ev.stopPropagation();\n                this.onSuggestionSelect();\n              }\n            }\n          }\n        }\n        break;\n    }\n  };\n\n  protected onItemChange = (changedItem: T, index: number): void => {\n    const { items } = this.state;\n\n    if (index >= 0) {\n      const newItems: T[] = items;\n      newItems[index] = changedItem;\n\n      this._updateSelectedItems(newItems);\n    }\n  };\n\n  protected onGetMoreResults = (): void => {\n    this.setState(\n      {\n        isSearching: true,\n      },\n      () => {\n        if (this.props.onGetMoreResults && this.input.current) {\n          const suggestions: T[] | PromiseLike<T[]> = (this.props.onGetMoreResults as any)(\n            this.input.current.value,\n            this.state.items,\n          );\n          const suggestionsArray: T[] = suggestions as T[];\n          const suggestionsPromiseLike: PromiseLike<T[]> = suggestions as PromiseLike<T[]>;\n\n          if (Array.isArray(suggestionsArray)) {\n            this.updateSuggestions(suggestionsArray);\n            this.setState({ isSearching: false });\n          } else if (suggestionsPromiseLike.then) {\n            suggestionsPromiseLike.then((newSuggestions: T[]) => {\n              this.updateSuggestions(newSuggestions);\n              this.setState({ isSearching: false });\n            });\n          }\n        } else {\n          this.setState({ isSearching: false });\n        }\n\n        if (this.input.current) {\n          this.input.current.focus();\n        }\n\n        this.setState({\n          moreSuggestionsAvailable: false,\n          isResultsFooterVisible: true,\n        });\n      },\n    );\n  };\n\n  protected completeSelection = (item: T) => {\n    this.addItem(item);\n    this.updateValue('');\n    if (this.input.current) {\n      this.input.current.clear();\n    }\n    this.setState({ suggestionsVisible: false });\n  };\n\n  protected addItemByIndex = (index: number): void => {\n    this.completeSelection(this.suggestionStore.getSuggestionAtIndex(index).item);\n  };\n\n  protected addItem = (item: T): void => {\n    const processedItem: T | PromiseLike<T> | null = this.props.onItemSelected\n      ? (this.props.onItemSelected as any)(item)\n      : item;\n\n    if (processedItem === null) {\n      return;\n    }\n\n    const processedItemObject: T = processedItem as T;\n    const processedItemPromiseLike: PromiseLike<T> = processedItem as PromiseLike<T>;\n\n    if (processedItemPromiseLike && processedItemPromiseLike.then) {\n      processedItemPromiseLike.then((resolvedProcessedItem: T) => {\n        const newItems: T[] = this.state.items.concat([resolvedProcessedItem]);\n        this._updateSelectedItems(newItems);\n      });\n    } else {\n      const newItems: T[] = this.state.items.concat([processedItemObject]);\n      this._updateSelectedItems(newItems);\n    }\n    this.setState({ suggestedDisplayValue: '', selectionRemoved: undefined });\n  };\n\n  protected removeItem = (item: T): void => {\n    const { items } = this.state;\n    const index: number = items.indexOf(item);\n\n    if (index >= 0) {\n      const newItems: T[] = items.slice(0, index).concat(items.slice(index + 1));\n      this.setState({ selectionRemoved: item });\n      this._updateSelectedItems(newItems);\n    }\n  };\n\n  protected removeItems = (itemsToRemove: any[]): void => {\n    const { items } = this.state;\n    const newItems: T[] = items.filter((item: any) => itemsToRemove.indexOf(item) === -1);\n\n    this._updateSelectedItems(newItems);\n  };\n\n  // This is protected because we may expect the backspace key to work differently in a different kind of picker.\n  // This lets the subclass override it and provide it's own onBackspace. For an example see the BasePickerListBelow\n  protected onBackspace(ev: React.KeyboardEvent<HTMLElement>) {\n    if (\n      (this.state.items.length && !this.input.current) ||\n      (this.input.current && !this.input.current.isValueSelected && this.input.current.cursorLocation === 0)\n    ) {\n      if (this.selection.getSelectedCount() > 0) {\n        this.removeItems(this.selection.getSelection());\n      } else {\n        this.removeItem(this.state.items[this.state.items.length - 1]);\n      }\n    }\n  }\n\n  /**\n   * @deprecated this is no longer necessary as focuszone has been removed\n   */\n  protected _shouldFocusZoneEnterInnerZone = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n    // If suggestions are shown const up/down keys control them, otherwise allow them through to control the focusZone.\n    if (this.state.suggestionsVisible) {\n      // eslint-disable-next-line deprecation/deprecation\n      switch (ev.which) {\n        case KeyCodes.up:\n        case KeyCodes.down:\n          return true;\n      }\n    }\n\n    // eslint-disable-next-line deprecation/deprecation\n    if (ev.which === KeyCodes.enter) {\n      return true;\n    }\n\n    return false;\n  };\n\n  protected getActiveDescendant() {\n    if (this.state.suggestionsLoading) {\n      return undefined;\n    }\n\n    const currentIndex = this.suggestionStore.currentIndex;\n\n    if (currentIndex < 0) {\n      // if the suggestions element has actions and the currentIndex does not point to a suggestion,\n      // return the action id\n      if (this.suggestionElement.current?.hasSuggestedAction()) {\n        return 'sug-selectedAction';\n      }\n\n      // If there are no suggestions and no action suggested, then return the ID for the no results found.\n      if (this.suggestionStore.suggestions.length === 0) {\n        return 'sug-noResultsFound';\n      }\n\n      return undefined;\n    } else {\n      return `sug-${currentIndex}`;\n    }\n  }\n\n  /** @deprecated use renderCustomAlert instead */\n  protected getSuggestionsAlert(suggestionAlertClassName: string = legacyStyles.screenReaderOnly) {\n    const currentIndex = this.suggestionStore.currentIndex;\n    if (this.props.enableSelectedSuggestionAlert) {\n      const selectedSuggestion =\n        currentIndex > -1 ? this.suggestionStore.getSuggestionAtIndex(this.suggestionStore.currentIndex) : undefined;\n      const selectedSuggestionAlertText = selectedSuggestion ? selectedSuggestion.ariaLabel : undefined;\n      // keeping the id/className here for legacy support\n      return (\n        <div id={this._ariaMap.selectedSuggestionAlert} className={suggestionAlertClassName}>\n          {`${selectedSuggestionAlertText} `}\n        </div>\n      );\n    }\n  }\n\n  protected renderCustomAlert(alertClassName: string = legacyStyles.screenReaderOnly) {\n    const { suggestionRemovedText = 'removed {0}' } = this.props;\n    let removedItemText = '';\n\n    if (this.state.selectionRemoved) {\n      const itemName = this._getTextFromItem(this.state.selectionRemoved, '');\n      removedItemText = format(suggestionRemovedText, itemName);\n    }\n\n    return (\n      <div className={alertClassName} id={this._ariaMap.selectedSuggestionAlert} aria-live=\"assertive\">\n        {\n          // eslint-disable-next-line deprecation/deprecation\n          this.getSuggestionsAlert(alertClassName)\n        }\n        {removedItemText}\n      </div>\n    );\n  }\n\n  /** If suggestions are still loading after a predefined amount of time, set state to show user alert */\n  private _startLoadTimer() {\n    this._async.setTimeout(() => {\n      if (this.state.suggestionsLoading) {\n        this.setState({ suggestionsExtendedLoading: true });\n      }\n    }, EXTENDED_LOAD_TIME);\n  }\n\n  /**\n   * Takes in the current updated value and either resolves it with the new suggestions\n   * or if updated value is undefined then it clears out currently suggested items\n   */\n  private _updateAndResolveValue(updatedValue: string | undefined, newSuggestions: T[]) {\n    if (updatedValue !== undefined) {\n      this.resolveNewValue(updatedValue, newSuggestions);\n    } else {\n      const maxSuggestionsCount = this.props.pickerSuggestionsProps?.resultsMaximumNumber;\n      this.suggestionStore.updateSuggestions(newSuggestions, -1, maxSuggestionsCount);\n      if (this.state.suggestionsLoading) {\n        this.setState({\n          suggestionsLoading: false,\n          suggestionsExtendedLoading: false,\n        });\n      }\n    }\n  }\n\n  /**\n   * Controls what happens whenever there is an action that impacts the selected items.\n   * If `selectedItems` is provided, this will act as a controlled component and it will not update its own state.\n   */\n  private _updateSelectedItems(items: T[]): void {\n    if (this.props.selectedItems) {\n      // If the component is a controlled component then the controlling component will need to add or remove the items.\n      this.onChange(items);\n    } else {\n      this.setState({ items }, () => {\n        this._onSelectedItemsUpdated(items);\n      });\n    }\n  }\n\n  private _onSelectedItemsUpdated(items?: T[]): void {\n    this.onChange(items);\n  }\n\n  /**\n   * Suggestions are normally shown after the user updates text and the text\n   * is non-empty, but also when the user clicks on the input element.\n   * @returns True if suggestions should be shown.\n   */\n  private _getShowSuggestions(): boolean {\n    const areSuggestionsVisible =\n      this.input.current !== undefined &&\n      this.input.current !== null &&\n      this.input.current.inputElement === document.activeElement &&\n      this.input.current.value !== '';\n\n    return areSuggestionsVisible;\n  }\n\n  private _onResolveSuggestions = (updatedValue: string): void => {\n    const suggestions: T[] | PromiseLike<T[]> | null = this.props.onResolveSuggestions(updatedValue, this.state.items);\n\n    if (suggestions !== null) {\n      this.updateSuggestionsList(suggestions, updatedValue);\n    }\n  };\n\n  private _completeGenericSuggestion = (): void => {\n    if (\n      this.props.onValidateInput &&\n      this.input.current &&\n      (this.props.onValidateInput as any)(this.input.current.value) !== ValidationState.invalid &&\n      this.props.createGenericItem\n    ) {\n      const itemToConvert = this.props.createGenericItem(\n        this.input.current.value,\n        this.props.onValidateInput(this.input.current.value),\n      );\n      this.suggestionStore.createGenericSuggestion(itemToConvert);\n      this.completeSuggestion();\n    }\n  };\n\n  private _getTextFromItem(item: T, currentValue?: string): string {\n    if (this.props.getTextFromItem) {\n      return (this.props.getTextFromItem as any)(item, currentValue);\n    } else {\n      return '';\n    }\n  }\n\n  /**\n   * This should be called when the user does something other than use text entry to trigger suggestions.\n   *\n   */\n  private _userTriggeredSuggestions = () => {\n    if (!this.state.suggestionsVisible) {\n      const input = this.input.current ? this.input.current.value : '';\n      if (!input) {\n        this.onEmptyInputFocus();\n      } else {\n        if (this.suggestionStore.suggestions.length === 0) {\n          this._onResolveSuggestions(input);\n        } else {\n          this.setState({\n            isMostRecentlyUsedVisible: false,\n            suggestionsVisible: true,\n          });\n        }\n      }\n    }\n  };\n}\n\nexport class BasePickerListBelow<T, P extends IBasePickerProps<T>> extends BasePicker<T, P> {\n  public render(): JSX.Element {\n    const { suggestedDisplayValue, isFocused } = this.state;\n    const { className, inputProps, disabled, selectionAriaLabel, selectionRole = 'list', theme, styles } = this.props;\n\n    const suggestionsVisible = !!this.state.suggestionsVisible;\n\n    const suggestionsAvailable: string | undefined = suggestionsVisible ? this._ariaMap.suggestionList : undefined;\n    // TODO\n    // Clean this up by leaving only the first part after removing support for SASS.\n    // Currently we can not remove the SASS styles from BasePicker class because it\n    // might be used by consumers who created custom pickers from extending from\n    // this base class and have not used the new 'styles' prop.\n    // We check for 'styles' prop which is going to be injected by the 'styled' HOC\n    // for every other already existing picker variant (PeoplePicker, TagPicker)\n    // so that we can use the CSS-in-JS styles. If the check fails (ex: custom picker),\n    // then we just use the old SASS styles instead.\n    const classNames: Partial<IProcessedStyleSet<IBasePickerStyles>> = styles\n      ? getClassNames(styles, {\n          theme,\n          className,\n          isFocused,\n          inputClassName: inputProps && inputProps.className,\n        })\n      : {\n          root: css('ms-BasePicker', className ? className : ''),\n          text: css(\n            'ms-BasePicker-text',\n            legacyStyles.pickerText,\n            this.state.isFocused && legacyStyles.inputFocused,\n            disabled && legacyStyles.inputDisabled,\n          ),\n          itemsWrapper: legacyStyles.pickerItems,\n          input: css('ms-BasePicker-input', legacyStyles.pickerInput, inputProps && inputProps.className),\n          screenReaderText: legacyStyles.screenReaderOnly,\n        };\n\n    const comboLabel = this.props['aria-label'] || inputProps?.['aria-label'];\n\n    return (\n      <div ref={this.root} onBlur={this.onBlur} onFocus={this.onFocus}>\n        <div className={classNames.root} onKeyDown={this.onKeyDown}>\n          {this.renderCustomAlert(classNames.screenReaderText)}\n          <div className={classNames.text} aria-owns={suggestionsAvailable}>\n            <Autofill\n              {...(inputProps as any)}\n              className={classNames.input}\n              componentRef={this.input}\n              onFocus={this.onInputFocus}\n              onBlur={this.onInputBlur}\n              onClick={this.onClick}\n              onInputValueChange={this.onInputChange}\n              suggestedDisplayValue={suggestedDisplayValue}\n              aria-activedescendant={suggestionsVisible ? this.getActiveDescendant() : undefined}\n              aria-controls={suggestionsAvailable}\n              aria-expanded={suggestionsVisible}\n              aria-haspopup=\"listbox\"\n              aria-label={comboLabel}\n              role=\"combobox\"\n              id={inputProps?.id ? inputProps.id : this._ariaMap.combobox}\n              disabled={disabled}\n              onInputChange={this.props.onInputChange}\n            />\n          </div>\n        </div>\n        {this.renderSuggestions()}\n        <SelectionZone selection={this.selection} selectionMode={SelectionMode.single}>\n          <div\n            id={this._ariaMap.selectedItems}\n            className=\"ms-BasePicker-selectedItems\" // just a className hook without any styles applied to it.\n            role={selectionRole}\n            aria-label={selectionAriaLabel || comboLabel}\n          >\n            {this.renderItems()}\n          </div>\n        </SelectionZone>\n      </div>\n    );\n  }\n\n  protected onBackspace(ev: React.KeyboardEvent<HTMLElement>) {\n    // override the existing backspace method to not do anything because the list items appear below.\n  }\n}\n"]}