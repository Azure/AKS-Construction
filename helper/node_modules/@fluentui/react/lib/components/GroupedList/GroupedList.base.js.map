{"version":3,"file":"GroupedList.base.js","sourceRoot":"../src/","sources":["components/GroupedList/GroupedList.base.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,sBAAsB,EAAE,kBAAkB,EAAE,QAAQ,EAAE,iBAAiB,EAAE,GAAG,EAAE,MAAM,iBAAiB,CAAC;AAC/G,OAAO,EAAE,kBAAkB,EAAE,MAAM,sBAAsB,CAAC;AAC1D,OAAO,EAAE,IAAI,EAAgB,MAAM,YAAY,CAAC;AAChD,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;AAChD,OAAO,EAAE,mBAAmB,EAAE,MAAM,kCAAkC,CAAC;AACvE,OAAO,EAAE,SAAS,EAAE,kBAAkB,EAAE,MAAM,iBAAiB,CAAC;AAchE,IAAM,aAAa,GAAG,kBAAkB,EAA8C,CAAC;AAC/E,IAAW,UAAU,GAA2C,mBAAmB,UAA9D,EAAoB,kBAAkB,GAAK,mBAAmB,iBAAxB,CAAyB;AAW5F;IAAqC,mCAAqD;IAyDxF,yBAAY,KAAwB;QAApC,YACE,kBAAM,KAAK,CAAC,SAcb;QA9DO,WAAK,GAAG,KAAK,CAAC,SAAS,EAAQ,CAAC;QAoKhC,kBAAY,GAAG,UAAC,KAAyB,EAAE,UAAkB;YAC7D,IAAA,KAcF,KAAI,CAAC,KAAK,EAbZ,cAAc,oBAAA,EACd,cAAc,oBAAA,EACd,gBAAgB,sBAAA,EAChB,UAAU,gBAAA,EACV,KAAK,WAAA,EACL,SAAS,eAAA,EACT,YAAY,kBAAA,EACZ,aAAa,mBAAA,EACb,SAAS,eAAA,EACT,QAAQ,cAAA,EACR,kBAAkB,wBAAA,EAClB,MAAM,YAAA,EACN,OAAO,aACK,CAAC;YAEf,+CAA+C;YAC/C,IAAM,YAAY,GAAG;gBACnB,mBAAmB,EAAE,KAAI,CAAC,oBAAoB;gBAC9C,gBAAgB,EAAE,KAAI,CAAC,iBAAiB;gBACxC,iBAAiB,EAAE,KAAI,CAAC,kBAAkB;aAC3C,CAAC;YAEF,IAAM,WAAW,yBAA2B,UAAW,CAAC,WAAW,GAAK,YAAY,CAAE,CAAC;YACvF,IAAM,YAAY,yBAA4B,UAAW,CAAC,YAAY,GAAK,YAAY,CAAE,CAAC;YAC1F,IAAM,WAAW,yBAA2B,UAAW,CAAC,WAAW,GAAK,YAAY,CAAE,CAAC;YACvF,IAAM,iBAAiB,GAAG,KAAI,CAAC,qBAAqB,EAAE,CAAC;YAEvD,IAAI,CAAC,UAAW,CAAC,eAAe,IAAI,KAAK,IAAI,KAAK,CAAC,KAAK,KAAK,CAAC,EAAE;gBAC9D,OAAO,IAAI,CAAC;aACb;YAED,IAAM,cAAc,yBACf,CAAC,SAAS,IAAI,EAAE,CAAC,KACpB,OAAO,EAAE,KAAI,CAAC,KAAK,CAAC,OAAO,GAC5B,CAAC;YAEF,OAAO,CACL,oBAAC,kBAAkB,IACjB,GAAG,EAAE,KAAI,CAAC,YAAY,CAAC,KAAK,EAAE,UAAU,CAAC,EACzC,cAAc,EAAE,cAAc,EAC9B,cAAc,EAAE,cAAc,EAC9B,gBAAgB,EAAE,gBAAgB,EAClC,WAAW,EAAE,WAAW,EACxB,iBAAiB,EAAE,UAAU,IAAI,UAAU,CAAC,iBAAiB,EAC7D,KAAK,EAAE,KAAK,EACZ,UAAU,EAAE,UAAU,EACtB,iBAAiB,EAAE,iBAAiB,EACpC,UAAU,EAAE,UAAU,EACtB,WAAW,EAAE,WAAW,EACxB,SAAS,EAAE,cAAc,EACzB,KAAK,EAAE,KAAK,EACZ,YAAY,EAAE,YAAY,EAC1B,mBAAmB,EAAE,UAAW,CAAC,cAAc,EAC/C,oBAAoB,EAAE,UAAW,CAAC,eAAe,EACjD,mBAAmB,EAAE,UAAW,CAAC,cAAc,EAC/C,aAAa,EAAE,aAAa,EAC5B,SAAS,EAAE,SAAS,EACpB,YAAY,EAAE,YAAY,EAC1B,QAAQ,EAAE,QAAQ,EAClB,kBAAkB,EAAE,kBAAkB,EACtC,qBAAqB,EAAE,KAAI,CAAC,WAAW,EACvC,MAAM,EAAE,MAAM,EACd,OAAO,EAAE,OAAO,GAChB,CACH,CAAC;QACJ,CAAC,CAAC;QAMM,+BAAyB,GAAG,UAAC,KAAa;YAChD,OAAO,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC;QAC3F,CAAC,CAAC;QAEM,wBAAkB,GAAG,UAAC,KAAa;YACjC,IAAA,UAAU,GAAK,KAAI,CAAC,KAAK,WAAf,CAAgB;YAClC,IAAM,iBAAiB,GACrB,UAAU,IAAI,UAAU,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAI,CAAC,yBAAyB,CAAC;YAE7G,OAAO,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAClC,CAAC,CAAC;QAEM,qBAAe,GAAG,UAAC,KAAa;YACtC,IAAM,SAAS,GAAG,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,UAAU,CAAC;YAEvE,OAAO,SAAS,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,KAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1F,CAAC,CAAC;QAEM,oBAAc,GAAgC,UAAC,SAAiB;YAC9D,IAAA,MAAM,GAAK,KAAI,CAAC,KAAK,OAAf,CAAgB;YACtB,IAAA,KAA0C,KAAI,CAAC,KAAK,eAAf,EAArC,cAAc,mBAAG,KAAI,CAAC,eAAe,KAAA,CAAgB;YAC7D,IAAM,SAAS,GAAG,MAAM,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC;YAE9C,IAAI,SAAS,EAAE;gBACb,OAAO,cAAc,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;aAC7C;iBAAM;gBACL,OAAO,CAAC,CAAC;aACV;QACH,CAAC,CAAC;QAmBM,uBAAiB,GAAG,UAAC,KAAa;YAChC,IAAA,UAAU,GAAK,KAAI,CAAC,KAAK,WAAf,CAAgB;YAClC,IAAM,gBAAgB,GAAG,UAAU,IAAI,UAAU,CAAC,WAAW,IAAI,UAAU,CAAC,WAAW,CAAC,gBAAgB,CAAC;YAEzG,IAAI,KAAK,EAAE;gBACT,IAAI,gBAAgB,EAAE;oBACpB,gBAAgB,CAAC,KAAK,CAAC,CAAC;iBACzB;gBAED,KAAK,CAAC,WAAW,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC;gBACvC,KAAI,CAAC,0BAA0B,EAAE,CAAC;gBAClC,KAAI,CAAC,WAAW,EAAE,CAAC;aACpB;QACH,CAAC,CAAC;QAEM,0BAAoB,GAAG,UAAC,KAAa;YACrC,IAAA,KAA+B,KAAI,CAAC,KAAK,EAAvC,SAAS,eAAA,EAAE,aAAa,mBAAe,CAAC;YAEhD,IAAI,KAAK,IAAI,SAAS,IAAI,aAAa,KAAK,aAAa,CAAC,QAAQ,EAAE;gBAClE,SAAS,CAAC,mBAAmB,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC;aAC9D;QACH,CAAC,CAAC;QAEM,2BAAqB,GAAG,UAAC,EAAoC;YACnE,mDAAmD;YACnD,OAAO,EAAE,CAAC,KAAK,KAAK,iBAAiB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACxD,CAAC,CAAC;QAQM,wBAAkB,GAAG,UAAC,KAAa;YACjC,IAAA,UAAU,GAAK,KAAI,CAAC,KAAK,WAAf,CAAgB;YAClC,IAAM,iBAAiB,GAAG,UAAU,IAAI,UAAU,CAAC,YAAY,IAAI,UAAU,CAAC,YAAY,CAAC,iBAAiB,CAAC;YAE7G,IAAI,iBAAiB,EAAE;gBACrB,iBAAiB,CAAC,KAAK,CAAC,CAAC;aAC1B;iBAAM;gBACL,IAAI,KAAK,EAAE;oBACT,KAAK,CAAC,YAAY,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC;iBAC1C;gBAED,KAAI,CAAC,WAAW,EAAE,CAAC;aACpB;QACH,CAAC,CAAC;QAEM,2BAAqB,GAAG,UAC9B,SAAiB;YAIjB,IAAM,MAAM,GAAG,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC;YACjC,IAAM,SAAS,GAAG,MAAM,IAAI,MAAM,CAAC,SAAS,CAAC,CAAC;YAC9C,OAAO;gBACL,GAAG,EAAE,SAAS,IAAI,SAAS,CAAC,GAAG;aAChC,CAAC;QACJ,CAAC,CAAC;QArSA,sBAAsB,CAAC,KAAI,CAAC,CAAC;QAE7B,KAAI,CAAC,oBAAoB,GAAG,KAAI,CAAC,2BAA2B,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAEnE,IAAA,KAAqC,KAAK,UAAV,EAAhC,qBAA8B,EAAE,KAAA,EAAnB,eAAY,EAAZ,OAAO,mBAAG,EAAE,KAAO,CAAW;QAEnD,KAAI,CAAC,KAAK,GAAG;YACX,MAAM,EAAE,KAAK,CAAC,MAAM;YACpB,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,SAAS,EAAE,KAAK,CAAC,SAAS;YAC1B,OAAO,SAAA;SACR,CAAC;;IACJ,CAAC;IA1Da,wCAAwB,GAAtC,UACE,SAA4B,EAC5B,aAAgC;QAExB,IAAA,MAAM,GAA+C,SAAS,OAAxD,EAAE,aAAa,GAAgC,SAAS,cAAzC,EAAE,OAAO,GAAuB,SAAS,QAAhC,EAAE,KAAK,GAAgB,SAAS,MAAzB,EAAE,SAAS,GAAK,SAAS,UAAd,CAAe;QACvE,IAAM,WAAW,GAAG,SAAS,IAAI,SAAS,CAAC,OAAO,CAAC;QAEnD,IAAI,SAAS,yBACR,aAAa,KAChB,aAAa,eAAA,EACb,OAAO,SAAA,EACP,MAAM,QAAA,EACN,SAAS,WAAA,EACT,KAAK,OAAA,GACN,CAAC;QAEF,IAAI,kBAAkB,GAAG,KAAK,CAAC;QAE/B,IAAM,mBAAmB,GAAG,aAAa,CAAC,SAAS,IAAI,aAAa,CAAC,SAAS,CAAC,OAAO,CAAC;QAEvF,IACE,WAAW,KAAK,mBAAmB;YACnC,KAAK,KAAK,aAAa,CAAC,KAAK;YAC7B,MAAM,KAAK,aAAa,CAAC,MAAM;YAC/B,aAAa,KAAK,aAAa,CAAC,aAAa;YAC7C,OAAO,KAAK,aAAa,CAAC,OAAO,EACjC;YACA,iHAAiH;YACjH,kHAAkH;YAClH,QAAQ;YACR,kBAAkB,GAAG,IAAI,CAAC;SAC3B;QAED,IAAI,kBAAkB,EAAE;YACtB,SAAS,yBACJ,SAAS,KACZ,OAAO,EAAE,EAAE,GACZ,CAAC;SACH;QAED,OAAO,SAAS,CAAC;IACnB,CAAC;IAmBM,uCAAa,GAApB,UAAqB,KAAa,EAAE,WAA2C,EAAE,YAA2B;QAC1G,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;YACtB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;SACpE;IACH,CAAC;IAEM,iDAAuB,GAA9B;QACE,OAAO,IAAI,CAAC,KAAK,CAAC,OAAQ,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC;IAC5D,CAAC;IAEM,2CAAiB,GAAxB;QACQ,IAAA,KAA8B,IAAI,CAAC,KAAK,EAAtC,UAAU,gBAAA,EAAE,cAAW,EAAX,MAAM,mBAAG,EAAE,KAAe,CAAC;QAE/C,IAAI,UAAU,IAAI,UAAU,CAAC,oBAAoB,EAAE;YACjD,IAAI,CAAC,wBAAwB,CAAC,MAAM,EAAE,UAAU,CAAC,oBAAoB,CAAC,CAAC;SACxE;IACH,CAAC;IAEM,gCAAM,GAAb;QACQ,IAAA,KAUF,IAAI,CAAC,KAAK,EATZ,SAAS,eAAA,EACT,YAAY,kBAAA,EACZ,kBAAkB,wBAAA,EAClB,KAAK,WAAA,EACL,YAAiB,EAAjB,IAAI,mBAAG,UAAU,KAAA,EACjB,MAAM,YAAA,EACN,OAAO,aAAA,EACP,sBAAmB,EAAnB,cAAc,mBAAG,EAAE,KAAA,EACnB,qBAAkB,EAAlB,aAAa,mBAAG,EAAE,KACN,CAAC;QACT,IAAA,KAAsB,IAAI,CAAC,KAAK,EAA9B,MAAM,YAAA,EAAE,OAAO,aAAe,CAAC;QAEvC,IAAI,CAAC,WAAW,GAAG,aAAa,CAAC,MAAM,EAAE;YACvC,KAAK,EAAE,KAAM;YACb,SAAS,WAAA;YACT,OAAO,EAAE,OAAO;SACjB,CAAC,CAAC;QAEK,IAAA,KAAsD,cAAc,qBAAnB,EAAjD,oBAAoB,mBAAG,IAAI,CAAC,qBAAqB,KAAA,CAAoB;QAE7E,OAAO,CACL,oBAAC,SAAS,aACR,SAAS,EAAE,kBAAkB,CAAC,QAAQ,uBACpB,aAAa,wBACZ,OAAO,EAC1B,IAAI,EAAC,cAAc,IACf,cAAc,IAClB,oBAAoB,EAAE,oBAAoB,EAC1C,SAAS,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,cAAc,CAAC,SAAS,CAAC,KAE9D,CAAC,MAAM,CAAC,CAAC,CAAC,CACT,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,CAAC,CAChC,CAAC,CAAC,CAAC,CACF,oBAAC,IAAI,aACH,GAAG,EAAE,IAAI,CAAC,KAAK,EACf,IAAI,EAAE,IAAI,EACV,KAAK,EAAE,MAAM,EACb,YAAY,EAAE,IAAI,CAAC,YAAY,EAC/B,mBAAmB,EAAE,IAAI,CAAC,UAAU,EACpC,aAAa,EAAE,IAAI,CAAC,cAAc,EAClC,oBAAoB,EAAE,IAAI,CAAC,qBAAqB,EAChD,YAAY,EAAE,YAAY,EAC1B,kBAAkB,EAAE,kBAAkB,EACtC,OAAO,EAAE,OAAO,IACZ,aAAa,EACjB,CACH,CACS,CACb,CAAC;IACJ,CAAC;IAEM,qCAAW,GAAlB;QACE,iBAAM,WAAW,WAAE,CAAC;QACpB,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAEM,2CAAiB,GAAxB,UAAyB,YAAqB;QACpC,IAAA,KAAgB,IAAI,CAAC,KAAK,OAAf,EAAX,MAAM,mBAAG,EAAE,KAAA,CAAgB;QAC3B,IAAA,UAAU,GAAK,IAAI,CAAC,KAAK,WAAf,CAAgB;QAClC,IAAM,mBAAmB,GAAG,UAAU,IAAI,UAAU,CAAC,mBAAmB,CAAC;QAEzE,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACrB,IAAI,mBAAmB,EAAE;gBACvB,mBAAmB,CAAC,YAAY,CAAC,CAAC;aACnC;YAED,IAAI,CAAC,wBAAwB,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;YAEpD,IAAI,CAAC,0BAA0B,EAAE,CAAC;YAElC,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;IACH,CAAC;IAEO,kDAAwB,GAAhC,UAAiC,MAAgB,EAAE,WAAoB;QACrE,KAAK,IAAI,UAAU,GAAG,CAAC,EAAE,UAAU,GAAG,MAAM,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE;YACjE,MAAM,CAAC,UAAU,CAAC,CAAC,WAAW,GAAG,WAAW,CAAC;SAC9C;IACH,CAAC;IAuEO,oCAAU,GAAlB;QACE,OAAO,CAAC,CAAC;IACX,CAAC;IAgCO,sCAAY,GAApB,UAAqB,KAAyB,EAAE,KAAa;QAC3D,OAAO,QAAQ,GAAG,CAAC,KAAK,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IACrE,CAAC;IAEO,+CAAqB,GAA7B;QACU,IAAA,MAAM,GAAK,IAAI,CAAC,KAAK,OAAf,CAAgB;QAC9B,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,aAAa,GAAG,MAAM,CAAC;QAE3B,OAAO,aAAa,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;YAChD,KAAK,EAAE,CAAC;YACR,aAAa,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;SAC3C;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IA8BO,2CAAiB,GAAzB,UAA0B,MAAiB;QACzC,IAAI,CAAC,QAAQ,CAAC;YACZ,OAAO,EAAE,EAAE;SACZ,CAAC,CAAC;IACL,CAAC;IA6BO,qDAA2B,GAAnC,UAAoC,MAA4B;QAAhE,iBAKC;QAJC,OAAO,CAAC,CAAC,CACP,MAAM;YACN,MAAM,CAAC,IAAI,CAAC,UAAA,KAAK,IAAI,OAAA,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAI,CAAC,2BAA2B,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,EAAxF,CAAwF,CAAC,CAC/G,CAAC;IACJ,CAAC;IAEO,oDAA0B,GAAlC;QACU,IAAA,MAAM,GAAK,IAAI,CAAC,KAAK,OAAf,CAAgB;QACtB,IAAA,yBAAyB,GAAK,IAAI,CAAC,KAAK,0BAAf,CAAgB;QAEjD,IAAM,sBAAsB,GAAG,IAAI,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC;QACxE,IAAI,IAAI,CAAC,oBAAoB,KAAK,sBAAsB,EAAE;YACxD,IAAI,yBAAyB,EAAE;gBAC7B,yBAAyB,CAAC,sBAAsB,CAAC,CAAC;aACnD;YACD,IAAI,CAAC,oBAAoB,GAAG,sBAAsB,CAAC;SACpD;IACH,CAAC;IApXa,4BAAY,GAAG;QAC3B,aAAa,EAAE,aAAa,CAAC,QAAQ;QACrC,eAAe,EAAE,IAAI;QACrB,UAAU,EAAE,EAAE;QACd,OAAO,EAAE,KAAK;KACf,CAAC;IAgXJ,sBAAC;CAAA,AAtXD,CAAqC,KAAK,CAAC,SAAS,GAsXnD;SAtXY,eAAe","sourcesContent":["import * as React from 'react';\nimport { initializeComponentRef, classNamesFunction, KeyCodes, getRTLSafeKeyCode, css } from '../../Utilities';\nimport { GroupedListSection } from './GroupedListSection';\nimport { List, ScrollToMode } from '../../List';\nimport { SelectionMode } from '../../Selection';\nimport { DEFAULT_ROW_HEIGHTS } from '../DetailsList/DetailsRow.styles';\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport type { IProcessedStyleSet } from '../../Styling';\nimport type {\n  IGroupedList,\n  IGroupedListProps,\n  IGroup,\n  IGroupedListStyleProps,\n  IGroupedListStyles,\n} from './GroupedList.types';\nimport type { IListProps } from '../../List';\nimport type { IGroupHeaderProps } from './GroupHeader';\nimport type { IGroupShowAllProps } from './GroupShowAll.styles';\nimport type { IGroupFooterProps } from './GroupFooter.types';\n\nconst getClassNames = classNamesFunction<IGroupedListStyleProps, IGroupedListStyles>();\nconst { rowHeight: ROW_HEIGHT, compactRowHeight: COMPACT_ROW_HEIGHT } = DEFAULT_ROW_HEIGHTS;\n\nexport interface IGroupedListState {\n  selectionMode?: IGroupedListProps['selectionMode'];\n  compact?: IGroupedListProps['compact'];\n  groups?: IGroup[];\n  items?: IGroupedListProps['items'];\n  listProps?: IGroupedListProps['listProps'];\n  version: {};\n}\n\nexport class GroupedListBase extends React.Component<IGroupedListProps, IGroupedListState> implements IGroupedList {\n  public static defaultProps = {\n    selectionMode: SelectionMode.multiple,\n    isHeaderVisible: true,\n    groupProps: {},\n    compact: false,\n  };\n\n  private _classNames: IProcessedStyleSet<IGroupedListStyles>;\n\n  private _list = React.createRef<List>();\n\n  private _isSomeGroupExpanded: boolean;\n\n  public static getDerivedStateFromProps(\n    nextProps: IGroupedListProps,\n    previousState: IGroupedListState,\n  ): IGroupedListState {\n    const { groups, selectionMode, compact, items, listProps } = nextProps;\n    const listVersion = listProps && listProps.version;\n\n    let nextState = {\n      ...previousState,\n      selectionMode,\n      compact,\n      groups,\n      listProps,\n      items,\n    };\n\n    let shouldForceUpdates = false;\n\n    const previousListVersion = previousState.listProps && previousState.listProps.version;\n\n    if (\n      listVersion !== previousListVersion ||\n      items !== previousState.items ||\n      groups !== previousState.groups ||\n      selectionMode !== previousState.selectionMode ||\n      compact !== previousState.compact\n    ) {\n      // If there are any props not passed explicitly to `List` which have an impact on the behavior of `onRenderCell`,\n      // these need to 'force-update' this component by revving the version. Otherwise, the List might render with stale\n      // data.\n      shouldForceUpdates = true;\n    }\n\n    if (shouldForceUpdates) {\n      nextState = {\n        ...nextState,\n        version: {},\n      };\n    }\n\n    return nextState;\n  }\n\n  constructor(props: IGroupedListProps) {\n    super(props);\n\n    initializeComponentRef(this);\n\n    this._isSomeGroupExpanded = this._computeIsSomeGroupExpanded(props.groups);\n\n    const { listProps: { version = {} } = {} } = props;\n\n    this.state = {\n      groups: props.groups,\n      items: props.items,\n      listProps: props.listProps,\n      version,\n    };\n  }\n\n  public scrollToIndex(index: number, measureItem?: (itemIndex: number) => number, scrollToMode?: ScrollToMode): void {\n    if (this._list.current) {\n      this._list.current.scrollToIndex(index, measureItem, scrollToMode);\n    }\n  }\n\n  public getStartItemIndexInView(): number {\n    return this._list.current!.getStartItemIndexInView() || 0;\n  }\n\n  public componentDidMount() {\n    const { groupProps, groups = [] } = this.props;\n\n    if (groupProps && groupProps.isAllGroupsCollapsed) {\n      this._setGroupsCollapsedState(groups, groupProps.isAllGroupsCollapsed);\n    }\n  }\n\n  public render(): JSX.Element {\n    const {\n      className,\n      usePageCache,\n      onShouldVirtualize,\n      theme,\n      role = 'treegrid',\n      styles,\n      compact,\n      focusZoneProps = {},\n      rootListProps = {},\n    } = this.props;\n    const { groups, version } = this.state;\n\n    this._classNames = getClassNames(styles, {\n      theme: theme!,\n      className,\n      compact: compact,\n    });\n\n    const { shouldEnterInnerZone = this._isInnerZoneKeystroke } = focusZoneProps;\n\n    return (\n      <FocusZone\n        direction={FocusZoneDirection.vertical}\n        data-automationid=\"GroupedList\"\n        data-is-scrollable=\"false\"\n        role=\"presentation\"\n        {...focusZoneProps}\n        shouldEnterInnerZone={shouldEnterInnerZone}\n        className={css(this._classNames.root, focusZoneProps.className)}\n      >\n        {!groups ? (\n          this._renderGroup(undefined, 0)\n        ) : (\n          <List\n            ref={this._list}\n            role={role}\n            items={groups}\n            onRenderCell={this._renderGroup}\n            getItemCountForPage={this._returnOne}\n            getPageHeight={this._getPageHeight}\n            getPageSpecification={this._getPageSpecification}\n            usePageCache={usePageCache}\n            onShouldVirtualize={onShouldVirtualize}\n            version={version}\n            {...rootListProps}\n          />\n        )}\n      </FocusZone>\n    );\n  }\n\n  public forceUpdate() {\n    super.forceUpdate();\n    this._forceListUpdates();\n  }\n\n  public toggleCollapseAll(allCollapsed: boolean): void {\n    const { groups = [] } = this.state;\n    const { groupProps } = this.props;\n    const onToggleCollapseAll = groupProps && groupProps.onToggleCollapseAll;\n\n    if (groups.length > 0) {\n      if (onToggleCollapseAll) {\n        onToggleCollapseAll(allCollapsed);\n      }\n\n      this._setGroupsCollapsedState(groups, allCollapsed);\n\n      this._updateIsSomeGroupExpanded();\n\n      this.forceUpdate();\n    }\n  }\n\n  private _setGroupsCollapsedState(groups: IGroup[], isCollapsed: boolean): void {\n    for (let groupIndex = 0; groupIndex < groups.length; groupIndex++) {\n      groups[groupIndex].isCollapsed = isCollapsed;\n    }\n  }\n\n  private _renderGroup = (group: IGroup | undefined, groupIndex: number): React.ReactNode => {\n    const {\n      dragDropEvents,\n      dragDropHelper,\n      eventsToRegister,\n      groupProps,\n      items,\n      listProps,\n      onRenderCell,\n      selectionMode,\n      selection,\n      viewport,\n      onShouldVirtualize,\n      groups,\n      compact,\n    } = this.props;\n\n    // override group header/footer props as needed\n    const dividerProps = {\n      onToggleSelectGroup: this._onToggleSelectGroup,\n      onToggleCollapse: this._onToggleCollapse,\n      onToggleSummarize: this._onToggleSummarize,\n    };\n\n    const headerProps: IGroupHeaderProps = { ...groupProps!.headerProps, ...dividerProps };\n    const showAllProps: IGroupShowAllProps = { ...groupProps!.showAllProps, ...dividerProps };\n    const footerProps: IGroupFooterProps = { ...groupProps!.footerProps, ...dividerProps };\n    const groupNestingDepth = this._getGroupNestingDepth();\n\n    if (!groupProps!.showEmptyGroups && group && group.count === 0) {\n      return null;\n    }\n\n    const finalListProps: IListProps = {\n      ...(listProps || {}),\n      version: this.state.version,\n    };\n\n    return (\n      <GroupedListSection\n        key={this._getGroupKey(group, groupIndex)}\n        dragDropEvents={dragDropEvents}\n        dragDropHelper={dragDropHelper}\n        eventsToRegister={eventsToRegister}\n        footerProps={footerProps}\n        getGroupItemLimit={groupProps && groupProps.getGroupItemLimit}\n        group={group}\n        groupIndex={groupIndex}\n        groupNestingDepth={groupNestingDepth}\n        groupProps={groupProps}\n        headerProps={headerProps}\n        listProps={finalListProps}\n        items={items}\n        onRenderCell={onRenderCell}\n        onRenderGroupHeader={groupProps!.onRenderHeader}\n        onRenderGroupShowAll={groupProps!.onRenderShowAll}\n        onRenderGroupFooter={groupProps!.onRenderFooter}\n        selectionMode={selectionMode}\n        selection={selection}\n        showAllProps={showAllProps}\n        viewport={viewport}\n        onShouldVirtualize={onShouldVirtualize}\n        groupedListClassNames={this._classNames}\n        groups={groups}\n        compact={compact}\n      />\n    );\n  };\n\n  private _returnOne(): number {\n    return 1;\n  }\n\n  private _getDefaultGroupItemLimit = (group: IGroup): number => {\n    return group.children && group.children.length > 0 ? group.children.length : group.count;\n  };\n\n  private _getGroupItemLimit = (group: IGroup): number => {\n    const { groupProps } = this.props;\n    const getGroupItemLimit =\n      groupProps && groupProps.getGroupItemLimit ? groupProps.getGroupItemLimit : this._getDefaultGroupItemLimit;\n\n    return getGroupItemLimit(group);\n  };\n\n  private _getGroupHeight = (group: IGroup): number => {\n    const rowHeight = this.props.compact ? COMPACT_ROW_HEIGHT : ROW_HEIGHT;\n\n    return rowHeight + (group.isCollapsed ? 0 : rowHeight * this._getGroupItemLimit(group));\n  };\n\n  private _getPageHeight: IListProps['getPageHeight'] = (itemIndex: number) => {\n    const { groups } = this.state;\n    const { getGroupHeight = this._getGroupHeight } = this.props;\n    const pageGroup = groups && groups[itemIndex];\n\n    if (pageGroup) {\n      return getGroupHeight(pageGroup, itemIndex);\n    } else {\n      return 0;\n    }\n  };\n\n  private _getGroupKey(group: IGroup | undefined, index: number): string {\n    return 'group-' + (group && group.key ? group.key : String(index));\n  }\n\n  private _getGroupNestingDepth(): number {\n    const { groups } = this.state;\n    let level = 0;\n    let groupsInLevel = groups;\n\n    while (groupsInLevel && groupsInLevel.length > 0) {\n      level++;\n      groupsInLevel = groupsInLevel[0].children;\n    }\n\n    return level;\n  }\n\n  private _onToggleCollapse = (group: IGroup): void => {\n    const { groupProps } = this.props;\n    const onToggleCollapse = groupProps && groupProps.headerProps && groupProps.headerProps.onToggleCollapse;\n\n    if (group) {\n      if (onToggleCollapse) {\n        onToggleCollapse(group);\n      }\n\n      group.isCollapsed = !group.isCollapsed;\n      this._updateIsSomeGroupExpanded();\n      this.forceUpdate();\n    }\n  };\n\n  private _onToggleSelectGroup = (group: IGroup): void => {\n    const { selection, selectionMode } = this.props;\n\n    if (group && selection && selectionMode === SelectionMode.multiple) {\n      selection.toggleRangeSelected(group.startIndex, group.count);\n    }\n  };\n\n  private _isInnerZoneKeystroke = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n    // eslint-disable-next-line deprecation/deprecation\n    return ev.which === getRTLSafeKeyCode(KeyCodes.right);\n  };\n\n  private _forceListUpdates(groups?: IGroup[]): void {\n    this.setState({\n      version: {},\n    });\n  }\n\n  private _onToggleSummarize = (group: IGroup): void => {\n    const { groupProps } = this.props;\n    const onToggleSummarize = groupProps && groupProps.showAllProps && groupProps.showAllProps.onToggleSummarize;\n\n    if (onToggleSummarize) {\n      onToggleSummarize(group);\n    } else {\n      if (group) {\n        group.isShowingAll = !group.isShowingAll;\n      }\n\n      this.forceUpdate();\n    }\n  };\n\n  private _getPageSpecification = (\n    itemIndex: number,\n  ): {\n    key?: string;\n  } => {\n    const groups = this.state.groups;\n    const pageGroup = groups && groups[itemIndex];\n    return {\n      key: pageGroup && pageGroup.key,\n    };\n  };\n\n  private _computeIsSomeGroupExpanded(groups: IGroup[] | undefined): boolean {\n    return !!(\n      groups &&\n      groups.some(group => (group.children ? this._computeIsSomeGroupExpanded(group.children) : !group.isCollapsed))\n    );\n  }\n\n  private _updateIsSomeGroupExpanded(): void {\n    const { groups } = this.state;\n    const { onGroupExpandStateChanged } = this.props;\n\n    const newIsSomeGroupExpanded = this._computeIsSomeGroupExpanded(groups);\n    if (this._isSomeGroupExpanded !== newIsSomeGroupExpanded) {\n      if (onGroupExpandStateChanged) {\n        onGroupExpandStateChanged(newIsSomeGroupExpanded);\n      }\n      this._isSomeGroupExpanded = newIsSomeGroupExpanded;\n    }\n  }\n}\n"]}