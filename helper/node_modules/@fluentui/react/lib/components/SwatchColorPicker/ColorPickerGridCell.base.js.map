{"version":3,"file":"ColorPickerGridCell.base.js","sourceRoot":"../src/","sources":["components/SwatchColorPicker/ColorPickerGridCell.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { mergeStyleSets } from '../../Styling';\nimport { classNamesFunction, memoizeFunction } from '../../Utilities';\nimport { getColorFromString } from '../../Color';\nimport { ButtonGridCell } from '../../utilities/ButtonGrid/ButtonGridCell';\nimport { getStyles as getActionButtonStyles } from '../Button/ActionButton/ActionButton.styles';\nimport type { ITheme, IProcessedStyleSet } from '../../Styling';\nimport type { IButtonClassNames } from '../Button/BaseButton.classNames';\nimport type {\n  IColorCellProps,\n  IColorPickerGridCellProps,\n  IColorPickerGridCellStyleProps,\n  IColorPickerGridCellStyles,\n} from './ColorPickerGridCell.types';\n\nconst getClassNames = classNamesFunction<IColorPickerGridCellStyleProps, IColorPickerGridCellStyles>();\n\n/** Validate if the cell's color is white or not to apply whiteCell style */\nconst isWhiteCell = (inputColor: string): boolean => {\n  const currentColor = getColorFromString(inputColor!);\n  return currentColor?.hex === 'ffffff';\n};\n\nconst getColorPickerGridCellButtonClassNames = memoizeFunction(\n  (\n    theme: ITheme,\n    className: string,\n    variantClassName: string,\n    iconClassName: string | undefined,\n    menuIconClassName: string | undefined,\n    disabled: boolean,\n    checked: boolean,\n    expanded: boolean,\n    isSplit: boolean | undefined,\n  ): IButtonClassNames => {\n    const styles = getActionButtonStyles(theme);\n    return mergeStyleSets({\n      root: [\n        'ms-Button',\n        styles.root,\n        variantClassName,\n        className,\n        checked && ['is-checked', styles.rootChecked],\n        disabled && ['is-disabled', styles.rootDisabled],\n        !disabled &&\n          !checked && {\n            selectors: {\n              ':hover': styles.rootHovered,\n              ':focus': styles.rootFocused,\n              ':active': styles.rootPressed,\n            },\n          },\n        disabled && checked && [styles.rootCheckedDisabled],\n        !disabled &&\n          checked && {\n            selectors: {\n              ':hover': styles.rootCheckedHovered,\n              ':active': styles.rootCheckedPressed,\n            },\n          },\n      ],\n      flexContainer: ['ms-Button-flexContainer', styles.flexContainer],\n    });\n  },\n);\n\nexport const ColorPickerGridCellBase: React.FunctionComponent<IColorPickerGridCellProps> = props => {\n  const {\n    item,\n    // eslint-disable-next-line deprecation/deprecation\n    idPrefix = props.id,\n    isRadio,\n    selected = false,\n    disabled = false,\n    styles,\n    circle = true,\n    color,\n    onClick,\n    onHover,\n    onFocus,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onWheel,\n    onKeyDown,\n    height,\n    width,\n    borderWidth,\n  } = props;\n\n  const classNames: IProcessedStyleSet<IColorPickerGridCellStyles> = getClassNames(styles!, {\n    theme: props.theme!,\n    disabled,\n    selected,\n    circle,\n    isWhite: isWhiteCell(color!),\n    height,\n    width,\n    borderWidth,\n  });\n\n  // Render the core of a color cell\n  const onRenderColorOption = (colorOption: IColorCellProps): JSX.Element => {\n    const svgClassName = classNames.svg;\n\n    // Build an SVG for the cell with the given shape and color properties\n    // Include role=\"img\" and aria-label here for better virtual cursor accessibility,\n    // and for a VoiceOver bug where it skips grid cells that lack inner content\n    return (\n      <svg\n        className={svgClassName}\n        role=\"img\"\n        aria-label={colorOption.label}\n        viewBox=\"0 0 20 20\"\n        fill={getColorFromString(colorOption.color as string)?.str}\n      >\n        {circle ? <circle cx=\"50%\" cy=\"50%\" r=\"50%\" /> : <rect width=\"100%\" height=\"100%\" />}\n      </svg>\n    );\n  };\n\n  const cellSemantics = isRadio\n    ? {\n        role: 'radio',\n        'aria-checked': selected,\n        selected: undefined,\n      }\n    : {\n        role: 'gridcell',\n        selected: selected,\n      };\n\n  return (\n    <ButtonGridCell\n      item={item}\n      id={`${idPrefix}-${item.id}-${item.index}`}\n      key={item.id}\n      disabled={disabled}\n      {...cellSemantics}\n      // eslint-disable-next-line react/jsx-no-bind\n      onRenderItem={onRenderColorOption}\n      onClick={onClick}\n      onHover={onHover}\n      onFocus={onFocus}\n      label={item.label}\n      className={classNames.colorCell}\n      getClassNames={getColorPickerGridCellButtonClassNames}\n      index={item.index}\n      onMouseEnter={onMouseEnter}\n      onMouseMove={onMouseMove}\n      onMouseLeave={onMouseLeave}\n      onWheel={onWheel}\n      onKeyDown={onKeyDown}\n    />\n  );\n};\n"]}