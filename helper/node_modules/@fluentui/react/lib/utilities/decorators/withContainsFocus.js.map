{"version":3,"file":"withContainsFocus.js","sourceRoot":"../src/","sources":["utilities/decorators/withContainsFocus.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;AAChD,OAAO,EAAE,KAAK,EAAE,MAAM,iBAAiB,CAAC;AAExC,MAAM,UAAU,iBAAiB,CAC/B,iBAAoF;IAEpF;QAAgD,8CAG/C;QAKC,oCAAY,KAAa;YAAzB,YACE,kBAAM,KAAK,CAAC,SAWb;YATC,KAAI,CAAC,KAAK,GAAG;gBACX,aAAa,EAAE,KAAK;aACrB,CAAC;YAEF,KAAI,CAAC,MAAM,GAAG,IAAI,KAAK,CAAC,KAAI,CAAC,CAAC;YAC9B,KAAI,CAAC,wBAAwB,GAAG,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAI,CAAC,iBAAiB,EAAE,EAAE,CAAC,CAAC;YACjF,KAAI,CAAC,2BAA2B,GAAG,KAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YAC/E,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;YACjD,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;;QACjD,CAAC;QAEM,yDAAoB,GAA3B;YACE,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;QAEM,2CAAM,GAAb;YACU,IAAA,aAAa,GAAK,IAAI,CAAC,KAAK,cAAf,CAAgB;YAErC,OAAO,CACL,6BAAK,OAAO,EAAE,IAAI,CAAC,YAAY,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW;gBACvD,oBAAC,iBAAiB,aAChB,GAAG,EAAE,IAAI,CAAC,2BAA2B,EACrC,aAAa,EAAE,aAAa,IACvB,IAAI,CAAC,KAAa,EACvB,CACE,CACP,CAAC;QACJ,CAAC;QAEM,gDAAW,GAAlB;YACE,IAAI,CAAC,0BAA0B,CAAC,WAAW,EAAE,CAAC;QAChD,CAAC;QAEO,iDAAY,GAApB,UAAqB,EAAoC;YACvD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;YAC9B,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAClC,CAAC;QAEO,gDAAW,GAAnB,UAAoB,EAAoC;YACtD,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;YAC/B,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAClC,CAAC;QAEO,sDAAiB,GAAzB;YACE,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,KAAK,IAAI,CAAC,iBAAiB,EAAE;gBACvD,IAAI,CAAC,QAAQ,CAAC,EAAE,aAAa,EAAE,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;aAC1D;QACH,CAAC;QACH,iCAAC;IAAD,CAAC,AA3DM,CAAyC,aAAa,GA2D3D;AACJ,CAAC","sourcesContent":["import * as React from 'react';\nimport { BaseDecorator } from './BaseDecorator';\nimport { Async } from '../../Utilities';\n\nexport function withContainsFocus<TProps extends { containsFocus?: boolean }, S>(\n  ComposedComponent: new (props: TProps, ...args: any[]) => React.Component<TProps, S>,\n): any {\n  return class WithContainsFocusComponent extends BaseDecorator<\n    TProps & { containsFocus?: boolean },\n    { containsFocus?: boolean }\n  > {\n    private _newContainsFocus: boolean;\n    private _delayedSetContainsFocus: () => void;\n    private _async: Async;\n\n    constructor(props: TProps) {\n      super(props);\n\n      this.state = {\n        containsFocus: false,\n      };\n\n      this._async = new Async(this);\n      this._delayedSetContainsFocus = this._async.debounce(this._setContainsFocus, 20);\n      this._updateComposedComponentRef = this._updateComposedComponentRef.bind(this);\n      this._handleFocus = this._handleFocus.bind(this);\n      this._handleBlur = this._handleBlur.bind(this);\n    }\n\n    public componentWillUnmount(): void {\n      this._async.dispose();\n    }\n\n    public render(): JSX.Element {\n      const { containsFocus } = this.state;\n\n      return (\n        <div onFocus={this._handleFocus} onBlur={this._handleBlur}>\n          <ComposedComponent\n            ref={this._updateComposedComponentRef}\n            containsFocus={containsFocus}\n            {...(this.props as any)}\n          />\n        </div>\n      );\n    }\n\n    public forceUpdate(): void {\n      this._composedComponentInstance.forceUpdate();\n    }\n\n    private _handleFocus(ev: React.FocusEvent<HTMLDivElement>): void {\n      this._newContainsFocus = true;\n      this._delayedSetContainsFocus();\n    }\n\n    private _handleBlur(ev: React.FocusEvent<HTMLDivElement>): void {\n      this._newContainsFocus = false;\n      this._delayedSetContainsFocus();\n    }\n\n    private _setContainsFocus(): void {\n      if (this.state.containsFocus !== this._newContainsFocus) {\n        this.setState({ containsFocus: this._newContainsFocus });\n      }\n    }\n  };\n}\n"]}