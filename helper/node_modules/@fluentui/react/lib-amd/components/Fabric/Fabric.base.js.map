{"version":3,"file":"Fabric.base.js","sourceRoot":"../src/","sources":["components/Fabric/Fabric.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  classNamesFunction,\n  divProperties,\n  getDocument,\n  getNativeProps,\n  getRTL,\n  memoizeFunction,\n  Customizer,\n  FocusRectsProvider,\n} from '../../Utilities';\nimport { createTheme } from '../../Styling';\nimport { useMergedRefs } from '@fluentui/react-hooks';\nimport type { IFabricProps, IFabricStyleProps, IFabricStyles } from './Fabric.types';\nimport type { IProcessedStyleSet } from '@fluentui/merge-styles';\nimport type { ITheme } from '../../Styling';\n\nconst getClassNames = classNamesFunction<IFabricStyleProps, IFabricStyles>();\nconst getFabricTheme = memoizeFunction((theme?: ITheme, isRTL?: boolean) => createTheme({ ...theme, rtl: isRTL }));\n\nconst getDir = ({ theme, dir }: IFabricProps) => {\n  const contextDir = getRTL(theme) ? 'rtl' : 'ltr';\n  const pageDir = getRTL() ? 'rtl' : 'ltr';\n  const componentDir = dir ? dir : contextDir;\n  return {\n    // If Fabric dir !== contextDir\n    // Or If contextDir !== pageDir\n    // Then we need to set dir of the Fabric root\n    rootDir: componentDir !== contextDir || componentDir !== pageDir ? componentDir : dir,\n    // If dir !== contextDir || pageDir\n    // then set contextual theme around content\n    needsTheme: componentDir !== contextDir,\n  };\n};\n\nexport const FabricBase: React.FunctionComponent<IFabricProps> = React.forwardRef<HTMLDivElement, IFabricProps>(\n  (props, ref) => {\n    const { className, theme, applyTheme, applyThemeToBody, styles } = props;\n\n    const classNames = getClassNames(styles, {\n      theme: theme!,\n      applyTheme: applyTheme,\n      className,\n    });\n\n    const rootElement = React.useRef<HTMLDivElement>(null);\n    useApplyThemeToBody(applyThemeToBody, classNames, rootElement);\n\n    return <>{useRenderedContent(props, classNames, rootElement, ref)}</>;\n  },\n);\nFabricBase.displayName = 'FabricBase';\n\nfunction useRenderedContent(\n  props: IFabricProps,\n  { root }: IProcessedStyleSet<IFabricStyles>,\n  rootElement: React.RefObject<HTMLDivElement>,\n  ref: React.Ref<HTMLDivElement>,\n) {\n  const { as: Root = 'div', dir, theme } = props;\n  const divProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(props, divProperties, ['dir']);\n\n  const { rootDir, needsTheme } = getDir(props);\n\n  let renderedContent = (\n    <FocusRectsProvider providerRef={rootElement}>\n      <Root dir={rootDir} {...divProps} className={root} ref={useMergedRefs(rootElement, ref)} />\n    </FocusRectsProvider>\n  );\n\n  // Create the contextual theme if component direction does not match parent direction.\n  if (needsTheme) {\n    // Disabling ThemeProvider here because theme doesn't need to be re-provided by ThemeProvider if dir has changed.\n    renderedContent = (\n      // eslint-disable-next-line deprecation/deprecation\n      <Customizer settings={{ theme: getFabricTheme(theme, dir === 'rtl') }}>{renderedContent}</Customizer>\n    );\n  }\n\n  return renderedContent;\n}\n\nfunction useApplyThemeToBody(\n  applyThemeToBody: boolean | undefined,\n  { bodyThemed }: IProcessedStyleSet<IFabricStyles>,\n  rootElement: React.RefObject<HTMLDivElement | undefined>,\n) {\n  React.useEffect((): void | (() => void) => {\n    if (applyThemeToBody) {\n      const currentDoc = getDocument(rootElement.current);\n      if (currentDoc) {\n        currentDoc.body.classList.add(bodyThemed);\n        return () => {\n          currentDoc.body.classList.remove(bodyThemed);\n        };\n      }\n    }\n  }, [bodyThemed, applyThemeToBody, rootElement]);\n\n  return rootElement;\n}\n"]}