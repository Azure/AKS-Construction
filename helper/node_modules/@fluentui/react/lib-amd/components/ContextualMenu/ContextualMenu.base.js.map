{"version":3,"file":"ContextualMenu.base.js","sourceRoot":"../src/","sources":["components/ContextualMenu/ContextualMenu.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { ContextualMenuItemType } from './ContextualMenu.types';\nimport { DirectionalHint } from '../../common/DirectionalHint';\nimport { FocusZone, FocusZoneDirection, FocusZoneTabbableElements } from '../../FocusZone';\nimport {\n  divProperties,\n  getNativeProps,\n  shallowCompare,\n  Async,\n  assign,\n  classNamesFunction,\n  css,\n  getFirstFocusable,\n  getLastFocusable,\n  getRTL,\n  KeyCodes,\n  shouldWrapFocus,\n  isIOS,\n  isMac,\n  memoizeFunction,\n  getPropsWithDefaults,\n  getDocument,\n  FocusRects,\n} from '../../Utilities';\nimport { hasSubmenu, getIsChecked, isItemDisabled } from '../../utilities/contextualMenu/index';\nimport { Callout } from '../../Callout';\nimport { ContextualMenuItem } from './ContextualMenuItem';\nimport {\n  ContextualMenuSplitButton,\n  ContextualMenuButton,\n  ContextualMenuAnchor,\n} from './ContextualMenuItemWrapper/index';\nimport { concatStyleSetsWithProps } from '../../Styling';\nimport { getItemStyles } from './ContextualMenu.classNames';\nimport {\n  useTarget,\n  usePrevious,\n  useAsync,\n  useWarnings,\n  useId,\n  Target,\n  useIsomorphicLayoutEffect,\n} from '@fluentui/react-hooks';\nimport { useResponsiveMode, ResponsiveMode } from '../../ResponsiveMode';\nimport { MenuContext } from '../../utilities/MenuContext/index';\nimport type {\n  IContextualMenuProps,\n  IContextualMenuItem,\n  IContextualMenuListProps,\n  IContextualMenuStyleProps,\n  IContextualMenuStyles,\n  IContextualMenuItemRenderProps,\n} from './ContextualMenu.types';\nimport type { IFocusZoneProps } from '../../FocusZone';\nimport type { IMenuItemClassNames, IContextualMenuClassNames } from './ContextualMenu.classNames';\nimport type { IRenderFunction, IStyleFunctionOrObject } from '../../Utilities';\nimport type { ICalloutContentStyleProps, ICalloutContentStyles } from '../../Callout';\nimport type { IProcessedStyleSet } from '../../Styling';\nimport type { IContextualMenuItemStyleProps, IContextualMenuItemStyles } from './ContextualMenuItem.types';\nimport type { IPopupRestoreFocusParams } from '../../Popup';\n\nconst getClassNames = classNamesFunction<IContextualMenuStyleProps, IContextualMenuStyles>();\nconst getContextualMenuItemClassNames = classNamesFunction<IContextualMenuItemStyleProps, IContextualMenuItemStyles>();\n\n// The default ContextualMenu properties have no items and beak, the default submenu direction is right and top.\nconst DEFAULT_PROPS: Partial<IContextualMenuProps> = {\n  items: [],\n  shouldFocusOnMount: true,\n  gapSpace: 0,\n  directionalHint: DirectionalHint.bottomAutoEdge,\n  beakWidth: 16,\n};\n\nexport function getSubmenuItems(\n  item: IContextualMenuItem,\n  options?: {\n    target?: Target;\n  },\n): IContextualMenuItem[] | undefined {\n  const target = options?.target;\n\n  // eslint-disable-next-line deprecation/deprecation\n  const items = item.subMenuProps ? item.subMenuProps.items : item.items;\n\n  if (items) {\n    const overrideItems: typeof items = [];\n\n    for (const subItem of items) {\n      if (subItem.preferMenuTargetAsEventTarget) {\n        // For sub-items which need an overridden target, intercept `onClick`\n        const { onClick, ...contextItem } = subItem;\n\n        overrideItems.push({\n          ...contextItem,\n          onClick: getOnClickWithOverrideTarget(onClick, target),\n        });\n      } else {\n        overrideItems.push(subItem);\n      }\n    }\n\n    return overrideItems;\n  }\n}\n\n/**\n * Returns true if a list of menu items can contain a checkbox\n */\nexport function canAnyMenuItemsCheck(items: IContextualMenuItem[]): boolean {\n  return items.some(item => {\n    if (item.canCheck) {\n      return true;\n    }\n\n    // If the item is a section, check if any of the items in the section can check.\n    if (item.sectionProps && item.sectionProps.items.some(submenuItem => submenuItem.canCheck === true)) {\n      return true;\n    }\n\n    return false;\n  });\n}\n\nconst NavigationIdleDelay = 250; /* ms */\n\nconst COMPONENT_NAME = 'ContextualMenu';\n\nconst _getMenuItemStylesFunction = memoizeFunction(\n  (\n    ...styles: (IStyleFunctionOrObject<IContextualMenuItemStyleProps, IContextualMenuItemStyles> | undefined)[]\n  ): IStyleFunctionOrObject<IContextualMenuItemStyleProps, IContextualMenuItemStyles> => {\n    return (styleProps: IContextualMenuItemStyleProps) =>\n      concatStyleSetsWithProps(styleProps, getItemStyles, ...styles);\n  },\n);\n\n//#region Custom hooks\nfunction useVisibility(props: IContextualMenuProps, targetWindow: Window | undefined) {\n  const { hidden = false, onMenuDismissed, onMenuOpened } = props;\n  const previousHidden = usePrevious(hidden);\n\n  const onMenuOpenedRef = React.useRef(onMenuOpened);\n  const onMenuClosedRef = React.useRef(onMenuDismissed);\n  const propsRef = React.useRef(props);\n\n  onMenuOpenedRef.current = onMenuOpened;\n  onMenuClosedRef.current = onMenuDismissed;\n  propsRef.current = props;\n\n  React.useEffect(() => {\n    // Don't issue dismissed callbacks on initial mount\n    if (hidden && previousHidden === false) {\n      onMenuClosedRef.current?.(propsRef.current);\n    } else if (!hidden && previousHidden !== false) {\n      onMenuOpenedRef.current?.(propsRef.current);\n    }\n  }, [hidden, previousHidden]);\n\n  // Issue onDismissedCallback on unmount\n  React.useEffect(() => () => onMenuClosedRef.current?.(propsRef.current), []);\n}\n\nfunction useSubMenuState(\n  { hidden, items, theme, className, id, target: menuTarget }: IContextualMenuProps,\n  dismiss: () => void,\n) {\n  const [expandedMenuItemKey, setExpandedMenuItemKey] = React.useState<string>();\n  const [submenuTarget, setSubmenuTarget] = React.useState<HTMLElement>();\n  /** True if the menu was expanded by mouse click OR hover (as opposed to by keyboard) */\n  const [shouldFocusOnContainer, setShouldFocusOnContainer] = React.useState<boolean>();\n  const subMenuId = useId(COMPONENT_NAME, id);\n\n  const closeSubMenu = React.useCallback(() => {\n    setShouldFocusOnContainer(undefined);\n    setExpandedMenuItemKey(undefined);\n    setSubmenuTarget(undefined);\n  }, []);\n\n  const openSubMenu = React.useCallback(\n    ({ key: submenuItemKey }: IContextualMenuItem, target: HTMLElement, focusContainer?: boolean) => {\n      if (expandedMenuItemKey === submenuItemKey) {\n        return;\n      }\n\n      target.focus();\n      setShouldFocusOnContainer(focusContainer);\n      setExpandedMenuItemKey(submenuItemKey);\n      setSubmenuTarget(target);\n    },\n    [expandedMenuItemKey],\n  );\n\n  React.useEffect(() => {\n    if (hidden) {\n      closeSubMenu();\n    }\n  }, [hidden, closeSubMenu]);\n\n  const onSubMenuDismiss = useOnSubmenuDismiss(dismiss, closeSubMenu);\n\n  const getSubmenuProps = (): IContextualMenuProps | null => {\n    const item = findItemByKeyFromItems(expandedMenuItemKey!, items);\n    let submenuProps: IContextualMenuProps | null = null;\n\n    if (item) {\n      submenuProps = {\n        items: getSubmenuItems(item, { target: menuTarget })!,\n        target: submenuTarget,\n        onDismiss: onSubMenuDismiss,\n        isSubMenu: true,\n        id: subMenuId,\n        shouldFocusOnMount: true,\n        shouldFocusOnContainer,\n        directionalHint: getRTL(theme) ? DirectionalHint.leftTopEdge : DirectionalHint.rightTopEdge,\n        className,\n        gapSpace: 0,\n        isBeakVisible: false,\n      };\n\n      if (item.subMenuProps) {\n        assign(submenuProps, item.subMenuProps);\n      }\n\n      if (item.preferMenuTargetAsEventTarget) {\n        const { onItemClick } = item;\n\n        submenuProps.onItemClick = getOnClickWithOverrideTarget(onItemClick, menuTarget);\n      }\n    }\n    return submenuProps;\n  };\n\n  return [expandedMenuItemKey, openSubMenu, getSubmenuProps, onSubMenuDismiss] as const;\n}\n\nfunction useShouldUpdateFocusOnMouseMove({ delayUpdateFocusOnHover, hidden }: IContextualMenuProps) {\n  const shouldUpdateFocusOnMouseEvent = React.useRef<boolean>(!delayUpdateFocusOnHover);\n  const gotMouseMove = React.useRef<boolean>(false);\n\n  React.useEffect(() => {\n    shouldUpdateFocusOnMouseEvent.current = !delayUpdateFocusOnHover;\n    gotMouseMove.current = hidden ? false : !delayUpdateFocusOnHover && gotMouseMove.current;\n  }, [delayUpdateFocusOnHover, hidden]);\n\n  const onMenuFocusCapture = React.useCallback(() => {\n    if (delayUpdateFocusOnHover) {\n      shouldUpdateFocusOnMouseEvent.current = false;\n    }\n  }, [delayUpdateFocusOnHover]);\n\n  return [shouldUpdateFocusOnMouseEvent, gotMouseMove, onMenuFocusCapture] as const;\n}\n\nfunction usePreviousActiveElement(\n  { hidden, onRestoreFocus }: IContextualMenuProps,\n  targetWindow: Window | undefined,\n  hostElement: any,\n) {\n  const previousActiveElement = React.useRef<undefined | HTMLElement>();\n\n  const tryFocusPreviousActiveElement = React.useCallback(\n    (options: IPopupRestoreFocusParams) => {\n      if (onRestoreFocus) {\n        onRestoreFocus(options);\n      } else if (options?.documentContainsFocus) {\n        // Make sure that the focus method actually exists\n        // In some cases the object might exist but not be a real element.\n        // This is primarily for IE 11 and should be removed once IE 11 is no longer in use.\n        previousActiveElement.current?.focus?.();\n      }\n    },\n    [onRestoreFocus],\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (!hidden) {\n      const newElement = targetWindow?.document.activeElement as HTMLElement;\n      if (!hostElement.current?.contains(newElement) && newElement.tagName !== 'BODY') {\n        previousActiveElement.current = newElement;\n      }\n    } else if (previousActiveElement.current) {\n      tryFocusPreviousActiveElement({\n        originalElement: previousActiveElement.current,\n        containsFocus: true,\n        documentContainsFocus: getDocument()?.hasFocus() || false,\n      });\n\n      previousActiveElement.current = undefined;\n    }\n  }, [hidden, targetWindow?.document.activeElement, tryFocusPreviousActiveElement, hostElement]);\n\n  return [tryFocusPreviousActiveElement] as const;\n}\n\nfunction useKeyHandlers(\n  {\n    theme,\n    isSubMenu,\n    focusZoneProps: { checkForNoWrap, direction: focusZoneDirection = FocusZoneDirection.vertical } = {},\n  }: IContextualMenuProps,\n  dismiss: (ev?: any, dismissAll?: boolean | undefined) => void | undefined,\n  hostElement: React.RefObject<HTMLDivElement>,\n  openSubMenu: (submenuItemKey: IContextualMenuItem, target: HTMLElement) => void,\n) {\n  /** True if the most recent keydown event was for alt (option) or meta (command). */\n  const lastKeyDownWasAltOrMeta = React.useRef<boolean | undefined>();\n\n  /**\n   * Calls `shouldHandleKey` to determine whether the keyboard event should be handled;\n   * if so, stops event propagation and dismisses menu(s).\n   * @param ev - The keyboard event.\n   * @param shouldHandleKey - Returns whether we should handle this keyboard event.\n   * @param dismissAllMenus - If true, dismiss all menus. Otherwise, dismiss only the current menu.\n   * Only does anything if `shouldHandleKey` returns true.\n   * @returns Whether the event was handled.\n   */\n  const keyHandler = (\n    ev: React.KeyboardEvent<HTMLElement>,\n    shouldHandleKey: (ev: React.KeyboardEvent<HTMLElement>) => boolean,\n    dismissAllMenus?: boolean,\n  ): boolean => {\n    let handled = false;\n\n    if (shouldHandleKey(ev)) {\n      dismiss(ev, dismissAllMenus);\n      ev.preventDefault();\n      ev.stopPropagation();\n      handled = true;\n    }\n\n    return handled;\n  };\n\n  /**\n   * Checks if the submenu should be closed\n   */\n  const shouldCloseSubMenu = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n    const submenuCloseKey = getRTL(theme) ? KeyCodes.right : KeyCodes.left;\n\n    // eslint-disable-next-line deprecation/deprecation\n    if (ev.which !== submenuCloseKey || !isSubMenu) {\n      return false;\n    }\n\n    return !!(\n      focusZoneDirection === FocusZoneDirection.vertical ||\n      (checkForNoWrap && !shouldWrapFocus(ev.target as HTMLElement, 'data-no-horizontal-wrap'))\n    );\n  };\n\n  const shouldHandleKeyDown = (ev: React.KeyboardEvent<HTMLElement>) => {\n    return (\n      // eslint-disable-next-line deprecation/deprecation\n      ev.which === KeyCodes.escape ||\n      shouldCloseSubMenu(ev) ||\n      // eslint-disable-next-line deprecation/deprecation\n      (ev.which === KeyCodes.up && (ev.altKey || ev.metaKey))\n    );\n  };\n\n  const onKeyDown = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n    // Take note if we are processing an alt (option) or meta (command) keydown.\n    // See comment in shouldHandleKeyUp for reasoning.\n    lastKeyDownWasAltOrMeta.current = isAltOrMeta(ev);\n\n    // On Mac, pressing escape dismisses all levels of native context menus\n    // eslint-disable-next-line deprecation/deprecation\n    const dismissAllMenus = ev.which === KeyCodes.escape && (isMac() || isIOS());\n\n    return keyHandler(ev, shouldHandleKeyDown, dismissAllMenus);\n  };\n\n  /**\n   * We close the menu on key up only if ALL of the following are true:\n   * - Most recent key down was alt or meta (command)\n   * - The alt/meta key down was NOT followed by some other key (such as down/up arrow to\n   *   expand/collapse the menu)\n   * - We're not on a Mac (or iOS)\n   *\n   * This is because on Windows, pressing alt moves focus to the application menu bar or similar,\n   * closing any open context menus. There is not a similar behavior on Macs.\n   */\n  const shouldHandleKeyUp = (ev: React.KeyboardEvent<HTMLElement>) => {\n    const keyPressIsAltOrMetaAlone = lastKeyDownWasAltOrMeta.current && isAltOrMeta(ev);\n    lastKeyDownWasAltOrMeta.current = false;\n    return !!keyPressIsAltOrMetaAlone && !(isIOS() || isMac());\n  };\n\n  const onKeyUp = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n    return keyHandler(ev, shouldHandleKeyUp, true /* dismissAllMenus */);\n  };\n\n  const onMenuKeyDown = (ev: React.KeyboardEvent<HTMLElement>) => {\n    // Mark as handled if onKeyDown returns true (for handling collapse cases)\n    // or if we are attempting to expand a submenu\n    const handled = onKeyDown(ev);\n\n    if (handled || !hostElement.current) {\n      return;\n    }\n\n    // If we have a modifier key being pressed, we do not want to move focus.\n    // Otherwise, handle up and down keys.\n    const hasModifier = !!(ev.altKey || ev.metaKey);\n    // eslint-disable-next-line deprecation/deprecation\n    const isUp = ev.which === KeyCodes.up;\n    // eslint-disable-next-line deprecation/deprecation\n    const isDown = ev.which === KeyCodes.down;\n    if (!hasModifier && (isUp || isDown)) {\n      const elementToFocus = isUp\n        ? getLastFocusable(hostElement.current, hostElement.current.lastChild as HTMLElement, true)\n        : getFirstFocusable(hostElement.current, hostElement.current.firstChild as HTMLElement, true);\n\n      if (elementToFocus) {\n        elementToFocus.focus();\n        ev.preventDefault();\n        ev.stopPropagation();\n      }\n    }\n  };\n\n  const onItemKeyDown = (item: any, ev: React.KeyboardEvent<HTMLElement>): void => {\n    const openKey = getRTL(theme) ? KeyCodes.left : KeyCodes.right;\n\n    if (\n      !item.disabled &&\n      // eslint-disable-next-line deprecation/deprecation\n      (ev.which === openKey || ev.which === KeyCodes.enter || (ev.which === KeyCodes.down && (ev.altKey || ev.metaKey)))\n    ) {\n      openSubMenu(item, ev.currentTarget as HTMLElement);\n      ev.preventDefault();\n    }\n  };\n\n  return [onKeyDown, onKeyUp, onMenuKeyDown, onItemKeyDown] as const;\n}\n\nfunction useScrollHandler(asyncTracker: Async) {\n  const isScrollIdle = React.useRef<boolean>(true);\n  const scrollIdleTimeoutId = React.useRef<number | undefined>();\n\n  /**\n   * Scroll handler for the callout to make sure the mouse events\n   * for updating focus are not interacting during scroll\n   */\n  const onScroll = (): void => {\n    if (!isScrollIdle.current && scrollIdleTimeoutId.current !== undefined) {\n      asyncTracker.clearTimeout(scrollIdleTimeoutId.current);\n      scrollIdleTimeoutId.current = undefined;\n    } else {\n      isScrollIdle.current = false;\n    }\n\n    scrollIdleTimeoutId.current = asyncTracker.setTimeout(() => {\n      isScrollIdle.current = true;\n    }, NavigationIdleDelay);\n  };\n\n  return [onScroll, isScrollIdle] as const;\n}\n\nfunction useOnSubmenuDismiss(dismiss: (ev?: any, dismissAll?: boolean) => void, closeSubMenu: () => void) {\n  const isMountedRef = React.useRef(false);\n  React.useEffect(() => {\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  /**\n   * This function is called ASYNCHRONOUSLY, and so there is a chance it is called\n   * after the component is unmounted. The isMountedRef is added to prevent\n   * from calling setState() after unmount. Do NOT copy this pattern in synchronous\n   * code.\n   */\n  const onSubMenuDismiss = (ev?: any, dismissAll?: boolean): void => {\n    if (dismissAll) {\n      dismiss(ev, dismissAll);\n    } else if (isMountedRef.current) {\n      closeSubMenu();\n    }\n  };\n\n  return onSubMenuDismiss;\n}\n\nfunction useSubmenuEnterTimer({ subMenuHoverDelay = NavigationIdleDelay }: IContextualMenuProps, asyncTracker: Async) {\n  const enterTimerRef = React.useRef<number | undefined>(undefined);\n\n  const cancelSubMenuTimer = () => {\n    if (enterTimerRef.current !== undefined) {\n      asyncTracker.clearTimeout(enterTimerRef.current);\n      enterTimerRef.current = undefined;\n    }\n  };\n\n  const startSubmenuTimer = (onTimerExpired: () => void) => {\n    enterTimerRef.current = asyncTracker.setTimeout(() => {\n      onTimerExpired();\n      cancelSubMenuTimer();\n    }, subMenuHoverDelay);\n  };\n\n  return [cancelSubMenuTimer, startSubmenuTimer, enterTimerRef as React.RefObject<number | undefined>] as const;\n}\n\nfunction useMouseHandlers(\n  props: IContextualMenuProps,\n  isScrollIdle: React.MutableRefObject<boolean>,\n  subMenuEntryTimer: React.RefObject<number | undefined>,\n  targetWindow: Window | undefined,\n  shouldUpdateFocusOnMouseEvent: React.MutableRefObject<boolean>,\n  gotMouseMove: React.MutableRefObject<boolean>,\n  expandedMenuItemKey: string | undefined,\n  hostElement: React.RefObject<HTMLDivElement>,\n  startSubmenuTimer: (onTimerExpired: () => void) => void,\n  cancelSubMenuTimer: () => void,\n  openSubMenu: (submenuItemKey: IContextualMenuItem, target: HTMLElement, openedByMouseClick?: boolean) => void,\n  onSubMenuDismiss: (ev?: any, dismissAll?: boolean) => void,\n  dismiss: (ev?: any, dismissAll?: boolean) => void,\n) {\n  const { target: menuTarget } = props;\n\n  const onItemMouseEnterBase = (item: any, ev: React.MouseEvent<HTMLElement>, target?: HTMLElement): void => {\n    if (shouldUpdateFocusOnMouseEvent.current) {\n      gotMouseMove.current = true;\n    }\n\n    if (shouldIgnoreMouseEvent()) {\n      return;\n    }\n\n    updateFocusOnMouseEvent(item, ev, target);\n  };\n\n  const onItemMouseMoveBase = (item: any, ev: React.MouseEvent<HTMLElement>, target: HTMLElement): void => {\n    const targetElement = ev.currentTarget as HTMLElement;\n\n    // Always do this check to make sure we record a mouseMove if needed (even if we are timed out)\n    if (shouldUpdateFocusOnMouseEvent.current) {\n      gotMouseMove.current = true;\n    } else {\n      return;\n    }\n\n    if (\n      !isScrollIdle.current ||\n      subMenuEntryTimer.current !== undefined ||\n      targetElement === (targetWindow?.document.activeElement as HTMLElement)\n    ) {\n      return;\n    }\n\n    updateFocusOnMouseEvent(item, ev, target);\n  };\n\n  const shouldIgnoreMouseEvent = (): boolean => {\n    return !isScrollIdle.current || !gotMouseMove.current;\n  };\n\n  const onMouseItemLeave = (item: any, ev: React.MouseEvent<HTMLElement>): void => {\n    if (shouldIgnoreMouseEvent()) {\n      return;\n    }\n\n    cancelSubMenuTimer();\n\n    if (expandedMenuItemKey !== undefined) {\n      return;\n    }\n\n    /**\n     * IE11 focus() method forces parents to scroll to top of element.\n     * Edge and IE expose a setActive() function for focusable divs that\n     * sets the page focus but does not scroll the parent element.\n     */\n    if ((hostElement.current as any).setActive) {\n      try {\n        (hostElement.current as any).setActive();\n      } catch (e) {\n        /* no-op */\n      }\n    } else {\n      hostElement.current?.focus();\n    }\n  };\n\n  /**\n   * Handles updating focus when mouseEnter or mouseMove fire.\n   * As part of updating focus, This function will also update\n   * the expand/collapse state accordingly.\n   */\n  const updateFocusOnMouseEvent = (\n    item: IContextualMenuItem,\n    ev: React.MouseEvent<HTMLElement>,\n    target?: HTMLElement,\n  ) => {\n    const targetElement = target ? target : (ev.currentTarget as HTMLElement);\n\n    if (item.key === expandedMenuItemKey) {\n      return;\n    }\n\n    cancelSubMenuTimer();\n\n    // If the menu is not expanded we can update focus without any delay\n    if (expandedMenuItemKey === undefined) {\n      targetElement.focus();\n    }\n\n    // Delay updating expanding/dismissing the submenu\n    // and only set focus if we have not already done so\n    if (hasSubmenu(item)) {\n      ev.stopPropagation();\n      startSubmenuTimer(() => {\n        targetElement.focus();\n        openSubMenu(item, targetElement, true);\n      });\n    } else {\n      startSubmenuTimer(() => {\n        onSubMenuDismiss(ev);\n        targetElement.focus();\n      });\n    }\n  };\n\n  const onItemClick = (\n    item: IContextualMenuItem,\n    ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>,\n  ): void => {\n    onItemClickBase(item, ev, ev.currentTarget as HTMLElement);\n  };\n\n  const onItemClickBase = (\n    item: IContextualMenuItem,\n    ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>,\n    target: HTMLElement,\n  ): void => {\n    const items = getSubmenuItems(item, { target: menuTarget });\n\n    // Cancel an async menu item hover timeout action from being taken and instead\n    // just trigger the click event instead.\n    cancelSubMenuTimer();\n\n    if (!hasSubmenu(item) && (!items || !items.length)) {\n      // This is an item without a menu. Click it.\n      executeItemClick(item, ev);\n    } else {\n      if (item.key !== expandedMenuItemKey) {\n        // This has a collapsed sub menu. Expand it.\n\n        // focus on the container by default when the menu is opened with a click event\n        // this differentiates from a keyboard interaction triggering the click event\n        const shouldFocusOnContainer =\n          typeof props.shouldFocusOnContainer === 'boolean'\n            ? props.shouldFocusOnContainer\n            : (ev.nativeEvent as PointerEvent).pointerType === 'mouse';\n        openSubMenu(item, target, shouldFocusOnContainer);\n      }\n    }\n\n    ev.stopPropagation();\n    ev.preventDefault();\n  };\n\n  const onAnchorClick = (item: IContextualMenuItem, ev: React.MouseEvent<HTMLElement>) => {\n    executeItemClick(item, ev);\n    ev.stopPropagation();\n  };\n\n  const executeItemClick = (\n    item: IContextualMenuItem,\n    ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>,\n  ): void => {\n    if (item.disabled || item.isDisabled) {\n      return;\n    }\n\n    if (item.preferMenuTargetAsEventTarget) {\n      overrideTarget(ev, menuTarget);\n    }\n\n    let shouldDismiss = false;\n    if (item.onClick) {\n      shouldDismiss = !!item.onClick(ev, item);\n    } else if (props.onItemClick) {\n      shouldDismiss = !!props.onItemClick(ev, item);\n    }\n\n    if (shouldDismiss || !ev.defaultPrevented) {\n      dismiss(ev, true);\n    }\n  };\n\n  return [\n    onItemMouseEnterBase,\n    onItemMouseMoveBase,\n    onMouseItemLeave,\n    onItemClick,\n    onAnchorClick,\n    executeItemClick,\n    onItemClickBase,\n  ] as const;\n}\n//#endregion\n\nexport const ContextualMenuBase: React.FunctionComponent<IContextualMenuProps> = React.memo(\n  React.forwardRef<HTMLDivElement, IContextualMenuProps>((propsWithoutDefaults, forwardedRef) => {\n    const { ref, ...props } = getPropsWithDefaults(DEFAULT_PROPS, propsWithoutDefaults);\n    const hostElement = React.useRef<HTMLDivElement>(null);\n    const asyncTracker = useAsync();\n    const menuId = useId(COMPONENT_NAME, props.id);\n\n    useWarnings({\n      name: COMPONENT_NAME,\n      props,\n      deprecations: {\n        getMenuClassNames: 'styles',\n      },\n    });\n\n    const dismiss = (ev?: any, dismissAll?: boolean) => props.onDismiss?.(ev, dismissAll);\n    const [targetRef, targetWindow] = useTarget(props.target, hostElement);\n    const [tryFocusPreviousActiveElement] = usePreviousActiveElement(props, targetWindow, hostElement);\n    const [expandedMenuItemKey, openSubMenu, getSubmenuProps, onSubMenuDismiss] = useSubMenuState(props, dismiss);\n    const [shouldUpdateFocusOnMouseEvent, gotMouseMove, onMenuFocusCapture] = useShouldUpdateFocusOnMouseMove(props);\n    const [onScroll, isScrollIdle] = useScrollHandler(asyncTracker);\n    const [cancelSubMenuTimer, startSubmenuTimer, subMenuEntryTimer] = useSubmenuEnterTimer(props, asyncTracker);\n\n    const responsiveMode = useResponsiveMode(hostElement, props.responsiveMode);\n\n    useVisibility(props, targetWindow);\n\n    const [onKeyDown, onKeyUp, onMenuKeyDown, onItemKeyDown] = useKeyHandlers(props, dismiss, hostElement, openSubMenu);\n    const [\n      onItemMouseEnterBase,\n      onItemMouseMoveBase,\n      onMouseItemLeave,\n      onItemClick,\n      onAnchorClick,\n      executeItemClick,\n      onItemClickBase,\n    ] = useMouseHandlers(\n      props,\n      isScrollIdle,\n      subMenuEntryTimer,\n      targetWindow,\n      shouldUpdateFocusOnMouseEvent,\n      gotMouseMove,\n      expandedMenuItemKey,\n      hostElement,\n      startSubmenuTimer,\n      cancelSubMenuTimer,\n      openSubMenu,\n      onSubMenuDismiss,\n      dismiss,\n    );\n\n    //#region Render helpers\n\n    const onDefaultRenderMenuList = (\n      menuListProps: IContextualMenuListProps,\n      // eslint-disable-next-line deprecation/deprecation\n      menuClassNames: IProcessedStyleSet<IContextualMenuStyles> | IContextualMenuClassNames,\n      defaultRender?: IRenderFunction<IContextualMenuListProps>,\n    ): JSX.Element => {\n      let indexCorrection = 0;\n      const { items, totalItemCount, hasCheckmarks, hasIcons } = menuListProps;\n\n      return (\n        <ul className={menuClassNames.list} onKeyDown={onKeyDown} onKeyUp={onKeyUp} role={'presentation'}>\n          {items.map((item, index) => {\n            const menuItem = renderMenuItem(\n              item,\n              index,\n              indexCorrection,\n              totalItemCount,\n              hasCheckmarks,\n              hasIcons,\n              menuClassNames,\n            );\n            if (item.itemType !== ContextualMenuItemType.Divider && item.itemType !== ContextualMenuItemType.Header) {\n              const indexIncrease = item.customOnRenderListLength ? item.customOnRenderListLength : 1;\n              indexCorrection += indexIncrease;\n            }\n            return menuItem;\n          })}\n        </ul>\n      );\n    };\n\n    const renderFocusZone = (children: JSX.Element | null, adjustedFocusZoneProps: IFocusZoneProps): JSX.Element => {\n      const { focusZoneAs: ChildrenRenderer = FocusZone } = props;\n      return <ChildrenRenderer {...adjustedFocusZoneProps}>{children}</ChildrenRenderer>;\n    };\n\n    /**\n     * !!!IMPORTANT!!! Avoid mutating `item: IContextualMenuItem` argument. It will\n     * cause the menu items to always re-render because the component update is based on shallow comparison.\n     */\n    const renderMenuItem = (\n      item: IContextualMenuItem,\n      index: number,\n      focusableElementIndex: number,\n      totalItemCount: number,\n      hasCheckmarks: boolean,\n      hasIcons: boolean,\n      // eslint-disable-next-line deprecation/deprecation\n      menuClassNames: IProcessedStyleSet<IContextualMenuStyles> | IContextualMenuClassNames,\n    ): JSX.Element => {\n      const renderedItems: React.ReactNode[] = [];\n      const iconProps = item.iconProps || { iconName: 'None' };\n      const {\n        getItemClassNames, // eslint-disable-line deprecation/deprecation\n        itemProps,\n      } = item;\n      const styles = itemProps ? itemProps.styles : undefined;\n\n      // We only send a dividerClassName when the item to be rendered is a divider.\n      // For all other cases, the default divider style is used.\n      const dividerClassName = item.itemType === ContextualMenuItemType.Divider ? item.className : undefined;\n      const subMenuIconClassName = item.submenuIconProps ? item.submenuIconProps.className : '';\n\n      // eslint-disable-next-line deprecation/deprecation\n      let itemClassNames: IMenuItemClassNames;\n\n      // IContextualMenuItem#getItemClassNames for backwards compatibility\n      // otherwise uses mergeStyles for class names.\n      if (getItemClassNames) {\n        itemClassNames = getItemClassNames(\n          props.theme!,\n          isItemDisabled(item),\n          expandedMenuItemKey === item.key,\n          !!getIsChecked(item),\n          !!item.href,\n          iconProps.iconName !== 'None',\n          item.className,\n          dividerClassName,\n          iconProps.className,\n          subMenuIconClassName,\n          item.primaryDisabled,\n        );\n      } else {\n        const itemStyleProps: IContextualMenuItemStyleProps = {\n          theme: props.theme!,\n          disabled: isItemDisabled(item),\n          expanded: expandedMenuItemKey === item.key,\n          checked: !!getIsChecked(item),\n          isAnchorLink: !!item.href,\n          knownIcon: iconProps.iconName !== 'None',\n          itemClassName: item.className,\n          dividerClassName,\n          iconClassName: iconProps.className,\n          subMenuClassName: subMenuIconClassName,\n          primaryDisabled: item.primaryDisabled,\n        };\n\n        // We need to generate default styles then override if styles are provided\n        // since the ContextualMenu currently handles item classNames.\n        itemClassNames = getContextualMenuItemClassNames(\n          _getMenuItemStylesFunction(menuClassNames.subComponentStyles?.menuItem, styles),\n          itemStyleProps,\n        );\n      }\n\n      // eslint-disable-next-line deprecation/deprecation\n      if (item.text === '-' || item.name === '-') {\n        item.itemType = ContextualMenuItemType.Divider;\n      }\n      switch (item.itemType) {\n        case ContextualMenuItemType.Divider:\n          renderedItems.push(renderSeparator(index, itemClassNames));\n          break;\n        case ContextualMenuItemType.Header:\n          renderedItems.push(renderSeparator(index, itemClassNames));\n          const headerItem = renderHeaderMenuItem(item, itemClassNames, menuClassNames, index, hasCheckmarks, hasIcons);\n          renderedItems.push(renderListItem(headerItem, item.key || index, itemClassNames, item.title));\n          break;\n        case ContextualMenuItemType.Section:\n          renderedItems.push(renderSectionItem(item, itemClassNames, menuClassNames, index, hasCheckmarks, hasIcons));\n          break;\n        default:\n          const defaultRenderNormalItem = () =>\n            renderNormalItem(\n              item,\n              itemClassNames,\n              index,\n              focusableElementIndex,\n              totalItemCount,\n              hasCheckmarks,\n              hasIcons,\n            ) as JSX.Element;\n\n          const menuItem = props.onRenderContextualMenuItem\n            ? props.onRenderContextualMenuItem(item, defaultRenderNormalItem)\n            : defaultRenderNormalItem();\n          renderedItems.push(renderListItem(menuItem, item.key || index, itemClassNames, item.title));\n          break;\n      }\n\n      // Since multiple nodes *could* be rendered, wrap them all in a fragment with this item's key.\n      // This ensures the reconciler handles multi-item output per-node correctly and does not re-mount content.\n      return <React.Fragment key={item.key}>{renderedItems}</React.Fragment>;\n    };\n\n    const defaultMenuItemRenderer = (\n      item: IContextualMenuItemRenderProps,\n      // eslint-disable-next-line deprecation/deprecation\n      menuClassNames: IProcessedStyleSet<IContextualMenuStyles> | IContextualMenuClassNames,\n    ): React.ReactNode => {\n      const { index, focusableElementIndex, totalItemCount, hasCheckmarks, hasIcons } = item;\n      return renderMenuItem(\n        item,\n        index,\n        focusableElementIndex,\n        totalItemCount,\n        hasCheckmarks,\n        hasIcons,\n        menuClassNames,\n      );\n    };\n\n    const renderSectionItem = (\n      sectionItem: IContextualMenuItem,\n      // eslint-disable-next-line deprecation/deprecation\n      itemClassNames: IMenuItemClassNames,\n      // eslint-disable-next-line deprecation/deprecation\n      menuClassNames: IProcessedStyleSet<IContextualMenuStyles> | IContextualMenuClassNames,\n      index: number,\n      hasCheckmarks: boolean,\n      hasIcons: boolean,\n    ) => {\n      const sectionProps = sectionItem.sectionProps;\n      if (!sectionProps) {\n        return;\n      }\n\n      let headerItem;\n      let groupProps;\n      if (sectionProps.title) {\n        let headerContextualMenuItem: IContextualMenuItem | undefined = undefined;\n        let ariaLabelledby = '';\n        if (typeof sectionProps.title === 'string') {\n          // Since title is a user-facing string, it needs to be stripped\n          // of whitespace in order to build a valid element ID\n          const id = menuId + sectionProps.title.replace(/\\s/g, '');\n          headerContextualMenuItem = {\n            key: `section-${sectionProps.title}-title`,\n            itemType: ContextualMenuItemType.Header,\n            text: sectionProps.title,\n            id: id,\n          };\n          ariaLabelledby = id;\n        } else {\n          const id = sectionProps.title.id || menuId + sectionProps.title.key.replace(/\\s/g, '');\n          headerContextualMenuItem = { ...sectionProps.title, id };\n          ariaLabelledby = id;\n        }\n\n        if (headerContextualMenuItem) {\n          groupProps = {\n            role: 'group',\n            'aria-labelledby': ariaLabelledby,\n          };\n          headerItem = renderHeaderMenuItem(\n            headerContextualMenuItem,\n            itemClassNames,\n            menuClassNames,\n            index,\n            hasCheckmarks,\n            hasIcons,\n          );\n        }\n      }\n\n      if (sectionProps.items && sectionProps.items.length > 0) {\n        return (\n          <li role=\"presentation\" key={sectionProps.key || sectionItem.key || `section-${index}`}>\n            <div {...groupProps}>\n              <ul className={menuClassNames.list} role=\"presentation\">\n                {sectionProps.topDivider && renderSeparator(index, itemClassNames, true, true)}\n                {headerItem && renderListItem(headerItem, sectionItem.key || index, itemClassNames, sectionItem.title)}\n                {sectionProps.items.map((contextualMenuItem, itemsIndex) =>\n                  renderMenuItem(\n                    contextualMenuItem,\n                    itemsIndex,\n                    itemsIndex,\n                    sectionProps.items.length,\n                    hasCheckmarks,\n                    hasIcons,\n                    menuClassNames,\n                  ),\n                )}\n                {sectionProps.bottomDivider && renderSeparator(index, itemClassNames, false, true)}\n              </ul>\n            </div>\n          </li>\n        );\n      }\n    };\n\n    const renderListItem = (\n      content: React.ReactNode,\n      key: string | number,\n      classNames: IMenuItemClassNames, // eslint-disable-line deprecation/deprecation\n      title?: string,\n    ) => {\n      return (\n        <li role=\"presentation\" title={title} key={key} className={classNames.item}>\n          {content}\n        </li>\n      );\n    };\n\n    const renderSeparator = (\n      index: number,\n      classNames: IMenuItemClassNames, // eslint-disable-line deprecation/deprecation\n      top?: boolean,\n      fromSection?: boolean,\n    ): React.ReactNode => {\n      if (fromSection || index > 0) {\n        return (\n          <li\n            role=\"separator\"\n            key={'separator-' + index + (top === undefined ? '' : top ? '-top' : '-bottom')}\n            className={classNames.divider}\n            aria-hidden=\"true\"\n          />\n        );\n      }\n      return null;\n    };\n\n    const renderNormalItem = (\n      item: IContextualMenuItem,\n      classNames: IMenuItemClassNames, // eslint-disable-line deprecation/deprecation\n      index: number,\n      focusableElementIndex: number,\n      totalItemCount: number,\n      hasCheckmarks: boolean,\n      hasIcons: boolean,\n    ): React.ReactNode => {\n      if (item.onRender) {\n        return item.onRender(\n          { 'aria-posinset': focusableElementIndex + 1, 'aria-setsize': totalItemCount, ...item },\n          dismiss,\n        );\n      }\n\n      const { contextualMenuItemAs } = props;\n\n      const commonProps = {\n        item,\n        classNames,\n        index,\n        focusableElementIndex,\n        totalItemCount,\n        hasCheckmarks,\n        hasIcons,\n        contextualMenuItemAs,\n        onItemMouseEnter: onItemMouseEnterBase,\n        onItemMouseLeave: onMouseItemLeave,\n        onItemMouseMove: onItemMouseMoveBase,\n        onItemMouseDown: onItemMouseDown,\n        executeItemClick: executeItemClick,\n        onItemKeyDown: onItemKeyDown,\n        expandedMenuItemKey,\n        openSubMenu,\n        dismissSubMenu: onSubMenuDismiss,\n        dismissMenu: dismiss,\n      } as const;\n\n      if (item.href) {\n        return <ContextualMenuAnchor {...commonProps} onItemClick={onAnchorClick} />;\n      }\n\n      if (item.split && hasSubmenu(item)) {\n        return (\n          <ContextualMenuSplitButton\n            {...commonProps}\n            onItemClick={onItemClick}\n            onItemClickBase={onItemClickBase}\n            onTap={cancelSubMenuTimer}\n          />\n        );\n      }\n\n      return <ContextualMenuButton {...commonProps} onItemClick={onItemClick} onItemClickBase={onItemClickBase} />;\n    };\n\n    const renderHeaderMenuItem = (\n      item: IContextualMenuItem,\n      // eslint-disable-next-line deprecation/deprecation\n      itemClassNames: IMenuItemClassNames,\n      // eslint-disable-next-line deprecation/deprecation\n      menuClassNames: IProcessedStyleSet<IContextualMenuStyles> | IContextualMenuClassNames,\n      index: number,\n      hasCheckmarks: boolean,\n      hasIcons: boolean,\n    ): React.ReactNode => {\n      const { contextualMenuItemAs: ChildrenRenderer = ContextualMenuItem } = props;\n      const { itemProps, id } = item;\n      const divHtmlProperties =\n        itemProps && getNativeProps<React.HTMLAttributes<HTMLDivElement>>(itemProps, divProperties);\n      return (\n        // eslint-disable-next-line deprecation/deprecation\n        <div id={id} className={menuClassNames.header} {...divHtmlProperties} style={item.style}>\n          <ChildrenRenderer\n            item={item}\n            classNames={itemClassNames}\n            index={index}\n            onCheckmarkClick={hasCheckmarks ? onItemClick : undefined}\n            hasIcons={hasIcons}\n            {...itemProps}\n          />\n        </div>\n      );\n    };\n    //#endregion\n\n    //#region Main render\n    let { isBeakVisible } = props;\n\n    const {\n      items,\n      labelElementId,\n      id,\n      className,\n      beakWidth,\n      directionalHint,\n      directionalHintForRTL,\n      alignTargetEdge,\n      gapSpace,\n      coverTarget,\n      ariaLabel,\n      doNotLayer,\n      target,\n      bounds,\n      useTargetWidth,\n      useTargetAsMinWidth,\n      directionalHintFixed,\n      shouldFocusOnMount,\n      shouldFocusOnContainer,\n      title,\n      styles,\n      theme,\n      calloutProps,\n      onRenderSubMenu = onDefaultRenderSubMenu,\n      onRenderMenuList = (\n        menuListProps: IContextualMenuListProps,\n        defaultRender?: IRenderFunction<IContextualMenuListProps>,\n      ) => onDefaultRenderMenuList(menuListProps, classNames, defaultRender),\n      focusZoneProps,\n      // eslint-disable-next-line deprecation/deprecation\n      getMenuClassNames,\n    } = props;\n\n    const classNames = getMenuClassNames\n      ? getMenuClassNames(theme!, className)\n      : getClassNames(styles, {\n          theme: theme!,\n          className: className,\n        });\n\n    const hasIcons = itemsHaveIcons(items);\n\n    function itemsHaveIcons(contextualMenuItems: IContextualMenuItem[]): boolean {\n      for (const item of contextualMenuItems) {\n        if (item.iconProps) {\n          return true;\n        }\n\n        if (\n          item.itemType === ContextualMenuItemType.Section &&\n          item.sectionProps &&\n          itemsHaveIcons(item.sectionProps.items)\n        ) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    const adjustedFocusZoneProps = {\n      direction: FocusZoneDirection.vertical,\n      handleTabKey: FocusZoneTabbableElements.all,\n      isCircularNavigation: true,\n      ...focusZoneProps,\n      className: css(classNames.root, props.focusZoneProps?.className),\n    };\n\n    const hasCheckmarks = canAnyMenuItemsCheck(items);\n    const submenuProps = expandedMenuItemKey && props.hidden !== true ? getSubmenuProps() : null;\n\n    isBeakVisible = isBeakVisible === undefined ? responsiveMode! <= ResponsiveMode.medium : isBeakVisible;\n    /**\n     * When useTargetWidth is true, get the width of the target element and apply it for the context menu container\n     */\n    let contextMenuStyle: React.CSSProperties;\n    const targetAsHtmlElement = targetRef.current as HTMLElement;\n    if ((useTargetWidth || useTargetAsMinWidth) && targetAsHtmlElement && targetAsHtmlElement.offsetWidth) {\n      const targetBoundingRect = targetAsHtmlElement.getBoundingClientRect();\n      const targetWidth = targetBoundingRect.width - 2; /* Accounts for 1px border */\n\n      if (useTargetWidth) {\n        contextMenuStyle = {\n          width: targetWidth,\n        };\n      } else if (useTargetAsMinWidth) {\n        contextMenuStyle = {\n          minWidth: targetWidth,\n        };\n      }\n    }\n\n    // The menu should only return if items were provided, if no items were provided then it should not appear.\n    if (items && items.length > 0) {\n      let totalItemCount = 0;\n      for (const item of items) {\n        if (item.itemType !== ContextualMenuItemType.Divider && item.itemType !== ContextualMenuItemType.Header) {\n          const itemCount = item.customOnRenderListLength ? item.customOnRenderListLength : 1;\n          totalItemCount += itemCount;\n        }\n      }\n\n      const calloutStyles = classNames.subComponentStyles\n        ? (classNames.subComponentStyles.callout as IStyleFunctionOrObject<\n            ICalloutContentStyleProps,\n            ICalloutContentStyles\n          >)\n        : undefined;\n\n      return (\n        <MenuContext.Consumer>\n          {menuContext => (\n            <Callout\n              styles={calloutStyles}\n              onRestoreFocus={tryFocusPreviousActiveElement}\n              {...calloutProps}\n              target={target || (menuContext.target as IContextualMenuProps['target'])}\n              isBeakVisible={isBeakVisible}\n              beakWidth={beakWidth}\n              directionalHint={directionalHint}\n              directionalHintForRTL={directionalHintForRTL}\n              gapSpace={gapSpace}\n              coverTarget={coverTarget}\n              doNotLayer={doNotLayer}\n              className={css('ms-ContextualMenu-Callout', calloutProps && calloutProps.className)}\n              setInitialFocus={shouldFocusOnMount}\n              onDismiss={props.onDismiss || menuContext.onDismiss}\n              onScroll={onScroll}\n              bounds={bounds}\n              directionalHintFixed={directionalHintFixed}\n              alignTargetEdge={alignTargetEdge}\n              hidden={props.hidden || menuContext.hidden}\n              ref={forwardedRef}\n            >\n              <div\n                style={contextMenuStyle}\n                ref={hostElement}\n                id={id}\n                className={classNames.container}\n                tabIndex={shouldFocusOnContainer ? 0 : -1}\n                onKeyDown={onMenuKeyDown}\n                onKeyUp={onKeyUp}\n                onFocusCapture={onMenuFocusCapture}\n                aria-label={ariaLabel}\n                aria-labelledby={labelElementId}\n                role={'menu'}\n              >\n                {title && <div className={classNames.title}> {title} </div>}\n                {items && items.length\n                  ? renderFocusZone(\n                      onRenderMenuList(\n                        {\n                          ariaLabel,\n                          items,\n                          totalItemCount,\n                          hasCheckmarks,\n                          hasIcons,\n                          defaultMenuItemRenderer: (item: IContextualMenuItemRenderProps) =>\n                            defaultMenuItemRenderer(item, classNames),\n                          labelElementId,\n                        },\n                        (\n                          menuListProps: IContextualMenuListProps,\n                          defaultRender?: IRenderFunction<IContextualMenuListProps>,\n                        ) => onDefaultRenderMenuList(menuListProps, classNames, defaultRender),\n                      ),\n                      adjustedFocusZoneProps,\n                    )\n                  : null}\n                {submenuProps && onRenderSubMenu(submenuProps, onDefaultRenderSubMenu)}\n              </div>\n              <FocusRects />\n            </Callout>\n          )}\n        </MenuContext.Consumer>\n      );\n    } else {\n      return null;\n    }\n    //#endregion\n  }),\n  (prevProps, newProps) => {\n    if (!newProps.shouldUpdateWhenHidden && prevProps.hidden && newProps.hidden) {\n      // Do not update when hidden.\n      return true;\n    }\n\n    return shallowCompare(prevProps, newProps);\n  },\n);\nContextualMenuBase.displayName = 'ContextualMenuBase';\n\n/**\n * Returns true if the key for the event is alt (Mac option) or meta (Mac command).\n */\nfunction isAltOrMeta(ev: React.KeyboardEvent<HTMLElement>): boolean {\n  // eslint-disable-next-line deprecation/deprecation\n  return ev.which === KeyCodes.alt || ev.key === 'Meta';\n}\n\nfunction onItemMouseDown(item: IContextualMenuItem, ev: React.MouseEvent<HTMLElement>): void {\n  item.onMouseDown?.(item, ev);\n}\n\nfunction onDefaultRenderSubMenu(\n  subMenuProps: IContextualMenuProps,\n  defaultRender?: IRenderFunction<IContextualMenuProps>,\n): JSX.Element {\n  throw Error(\n    'ContextualMenuBase: onRenderSubMenu callback is null or undefined. ' +\n      'Please ensure to set `onRenderSubMenu` property either manually or with `styled` helper.',\n  );\n}\n\n/**\n * Returns the item that matches a given key if any.\n * @param key - The key of the item to match\n * @param items - The items to look for the key\n */\nfunction findItemByKeyFromItems(key: string, items: IContextualMenuItem[]): IContextualMenuItem | undefined {\n  for (const item of items) {\n    if (item.itemType === ContextualMenuItemType.Section && item.sectionProps) {\n      const match = findItemByKeyFromItems(key, item.sectionProps.items);\n      if (match) {\n        return match;\n      }\n    } else if (item.key && item.key === key) {\n      return item;\n    }\n  }\n}\n\nfunction getOnClickWithOverrideTarget(\n  onClick:\n    | ((\n        ev?: React.MouseEvent<HTMLElement, MouseEvent> | React.KeyboardEvent<HTMLElement> | undefined,\n        item?: IContextualMenuItem | undefined,\n      ) => boolean | void)\n    | undefined,\n  target: Target | undefined,\n) {\n  return onClick\n    ? (\n        ev?: React.MouseEvent<HTMLElement, MouseEvent> | React.KeyboardEvent<HTMLElement> | undefined,\n        item?: IContextualMenuItem | undefined,\n      ) => {\n        overrideTarget(ev, target);\n\n        return onClick(ev, item);\n      }\n    : onClick;\n}\n\nfunction overrideTarget(\n  ev?: React.MouseEvent<HTMLElement, MouseEvent> | React.KeyboardEvent<HTMLElement> | undefined,\n  target?: Target,\n): void {\n  if (ev && target) {\n    ev.persist();\n\n    if (target instanceof Event) {\n      ev.target = target.target as HTMLElement;\n    } else if (target instanceof Element) {\n      ev.target = target;\n    }\n  }\n}\n"]}