{"version":3,"file":"ContextualMenuAnchor.js","sourceRoot":"../src/","sources":["components/ContextualMenu/ContextualMenuItemWrapper/ContextualMenuAnchor.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { anchorProperties, getNativeProps, memoizeFunction, getId, mergeAriaAttributeValues } from '../../../Utilities';\nimport { ContextualMenuItemWrapper } from './ContextualMenuItemWrapper';\nimport { KeytipData } from '../../../KeytipData';\nimport { isItemDisabled, hasSubmenu } from '../../../utilities/contextualMenu/index';\nimport { ContextualMenuItem } from '../ContextualMenuItem';\nimport type { IKeytipDataProps } from '../../../KeytipData';\nimport type { IKeytipProps } from '../../../Keytip';\n\nexport class ContextualMenuAnchor extends ContextualMenuItemWrapper {\n  private _anchor = React.createRef<HTMLAnchorElement>();\n  private _ariaDescriptionId: string;\n\n  private _getMemoizedMenuButtonKeytipProps = memoizeFunction((keytipProps: IKeytipProps) => {\n    return {\n      ...keytipProps,\n      hasMenu: true,\n    };\n  });\n\n  public render() {\n    const {\n      item,\n      classNames,\n      index,\n      focusableElementIndex,\n      totalItemCount,\n      hasCheckmarks,\n      hasIcons,\n      contextualMenuItemAs: ChildrenRenderer = ContextualMenuItem,\n      expandedMenuItemKey,\n      onItemClick,\n      openSubMenu,\n      dismissSubMenu,\n      dismissMenu,\n    } = this.props;\n\n    let anchorRel = item.rel;\n    if (item.target && item.target.toLowerCase() === '_blank') {\n      anchorRel = anchorRel ? anchorRel : 'nofollow noopener noreferrer'; // Safe default to prevent tabjacking\n    }\n\n    const itemHasSubmenu = hasSubmenu(item);\n    const nativeProps = getNativeProps<React.HTMLAttributes<HTMLAnchorElement>>(item, anchorProperties);\n    const disabled = isItemDisabled(item);\n    const { itemProps, ariaDescription } = item;\n\n    let { keytipProps } = item;\n    if (keytipProps && itemHasSubmenu) {\n      keytipProps = this._getMemoizedMenuButtonKeytipProps(keytipProps);\n    }\n\n    // Check for ariaDescription to set the _ariaDescriptionId and render a hidden span with\n    // the description in it to be added to ariaDescribedBy\n    if (ariaDescription) {\n      this._ariaDescriptionId = getId();\n    }\n    const ariaDescribedByIds = mergeAriaAttributeValues(\n      item.ariaDescribedBy,\n      ariaDescription ? this._ariaDescriptionId : undefined,\n      nativeProps['aria-describedby'],\n    );\n\n    const additionalItemProperties = {\n      'aria-describedby': ariaDescribedByIds,\n    };\n\n    return (\n      <div>\n        <KeytipData keytipProps={item.keytipProps} ariaDescribedBy={ariaDescribedByIds} disabled={disabled}>\n          {(keytipAttributes: IKeytipDataProps): JSX.Element => (\n            <a\n              {...additionalItemProperties}\n              {...nativeProps}\n              {...keytipAttributes}\n              ref={this._anchor}\n              href={item.href}\n              target={item.target}\n              rel={anchorRel}\n              className={classNames.root}\n              role=\"menuitem\"\n              aria-haspopup={itemHasSubmenu || undefined}\n              aria-expanded={itemHasSubmenu ? item.key === expandedMenuItemKey : undefined}\n              aria-posinset={focusableElementIndex + 1}\n              aria-setsize={totalItemCount}\n              aria-disabled={isItemDisabled(item)}\n              // eslint-disable-next-line deprecation/deprecation\n              style={item.style}\n              onClick={this._onItemClick}\n              onMouseEnter={this._onItemMouseEnter}\n              onMouseLeave={this._onItemMouseLeave}\n              onMouseMove={this._onItemMouseMove}\n              onKeyDown={itemHasSubmenu ? this._onItemKeyDown : undefined}\n            >\n              <ChildrenRenderer\n                componentRef={item.componentRef}\n                item={item}\n                classNames={classNames}\n                index={index}\n                onCheckmarkClick={hasCheckmarks && onItemClick ? onItemClick : undefined}\n                hasIcons={hasIcons}\n                openSubMenu={openSubMenu}\n                dismissSubMenu={dismissSubMenu}\n                dismissMenu={dismissMenu}\n                getSubmenuTarget={this._getSubmenuTarget}\n                {...itemProps}\n              />\n              {this._renderAriaDescription(ariaDescription, classNames.screenReaderText)}\n            </a>\n          )}\n        </KeytipData>\n      </div>\n    );\n  }\n\n  protected _getSubmenuTarget = (): HTMLElement | undefined => {\n    return this._anchor.current ? this._anchor.current : undefined;\n  };\n\n  protected _onItemClick = (ev: React.MouseEvent<HTMLElement>): void => {\n    const { item, onItemClick } = this.props;\n    if (onItemClick) {\n      onItemClick(item, ev);\n    }\n  };\n\n  protected _renderAriaDescription = (ariaDescription?: string, className?: string) => {\n    // If ariaDescription is given, descriptionId will be assigned to ariaDescriptionSpan\n    return ariaDescription ? (\n      <span id={this._ariaDescriptionId} className={className}>\n        {ariaDescription}\n      </span>\n    ) : null;\n  };\n}\n"]}