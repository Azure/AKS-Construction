{"version":3,"file":"CalendarDay.base.js","sourceRoot":"../src/","sources":["components/Calendar/CalendarDay/CalendarDay.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { KeyCodes, css, classNamesFunction, format } from '@fluentui/utilities';\nimport { Icon } from '../../../Icon';\nimport { addMonths, compareDatePart, getMonthStart, getMonthEnd } from '@fluentui/date-time-utilities';\nimport { CalendarDayGrid } from '../../CalendarDayGrid/CalendarDayGrid';\nimport { useId } from '@fluentui/react-hooks';\nimport type { ICalendarDayProps, ICalendarDayStyleProps, ICalendarDayStyles } from './CalendarDay.types';\nimport type { IProcessedStyleSet } from '@fluentui/style-utilities';\nimport type { ICalendarDayGrid } from '../../CalendarDayGrid/CalendarDayGrid.types';\n\nconst getClassNames = classNamesFunction<ICalendarDayStyleProps, ICalendarDayStyles>();\n\nexport const CalendarDayBase: React.FunctionComponent<ICalendarDayProps> = props => {\n  const dayGrid = React.useRef<ICalendarDayGrid>(null);\n\n  React.useImperativeHandle(\n    props.componentRef,\n    () => ({\n      focus() {\n        dayGrid.current?.focus?.();\n      },\n    }),\n    [],\n  );\n\n  const {\n    strings,\n    navigatedDate,\n    dateTimeFormatter,\n    styles,\n    theme,\n    className,\n    onHeaderSelect,\n    showSixWeeksByDefault,\n    minDate,\n    maxDate,\n    restrictedDates,\n    onNavigateDate,\n    showWeekNumbers,\n    dateRangeType,\n    animationDirection,\n  } = props;\n  const monthAndYearId = useId();\n\n  const classNames = getClassNames(styles, {\n    theme: theme!,\n    className: className,\n    headerIsClickable: !!onHeaderSelect,\n    showWeekNumbers: showWeekNumbers,\n    animationDirection: animationDirection,\n  });\n\n  const monthAndYear = dateTimeFormatter.formatMonthYear(navigatedDate, strings);\n  const HeaderButtonComponentType = onHeaderSelect ? 'button' : 'div';\n  const headerAriaLabel = strings.yearPickerHeaderAriaLabel\n    ? format(strings.yearPickerHeaderAriaLabel, monthAndYear)\n    : monthAndYear;\n\n  return (\n    <div className={classNames.root}>\n      <div className={classNames.header}>\n        <HeaderButtonComponentType\n          aria-label={onHeaderSelect ? headerAriaLabel : undefined}\n          className={classNames.monthAndYear}\n          onClick={onHeaderSelect}\n          data-is-focusable={!!onHeaderSelect}\n          tabIndex={onHeaderSelect ? 0 : -1} // prevent focus if there's no action for the button\n          onKeyDown={onButtonKeyDown(onHeaderSelect)}\n          type=\"button\"\n        >\n          <span id={monthAndYearId} aria-live=\"polite\" aria-atomic=\"true\">\n            {monthAndYear}\n          </span>\n        </HeaderButtonComponentType>\n        <CalendarDayNavigationButtons {...props} classNames={classNames} />\n      </div>\n      <CalendarDayGrid\n        {...props}\n        styles={styles}\n        componentRef={dayGrid}\n        strings={strings}\n        navigatedDate={navigatedDate!}\n        weeksToShow={showSixWeeksByDefault ? 6 : undefined}\n        dateTimeFormatter={dateTimeFormatter!}\n        minDate={minDate}\n        maxDate={maxDate}\n        restrictedDates={restrictedDates}\n        onNavigateDate={onNavigateDate}\n        labelledBy={monthAndYearId}\n        dateRangeType={dateRangeType}\n      />\n    </div>\n  );\n};\nCalendarDayBase.displayName = 'CalendarDayBase';\n\ninterface ICalendarDayNavigationButtonsProps extends ICalendarDayProps {\n  classNames: IProcessedStyleSet<ICalendarDayStyles>;\n}\n\nconst CalendarDayNavigationButtons = (props: ICalendarDayNavigationButtonsProps): JSX.Element => {\n  const {\n    minDate,\n    maxDate,\n    navigatedDate,\n    allFocusable,\n    strings,\n    navigationIcons,\n    showCloseButton,\n    classNames,\n    onNavigateDate,\n    onDismiss,\n  } = props;\n\n  const onSelectNextMonth = (): void => {\n    onNavigateDate(addMonths(navigatedDate, 1), false);\n  };\n\n  const onSelectPrevMonth = (): void => {\n    onNavigateDate(addMonths(navigatedDate, -1), false);\n  };\n  const leftNavigationIcon = navigationIcons.leftNavigation;\n  const rightNavigationIcon = navigationIcons.rightNavigation;\n  const closeNavigationIcon = navigationIcons.closeIcon;\n\n  // determine if previous/next months are in bounds\n  const prevMonthInBounds = minDate ? compareDatePart(minDate, getMonthStart(navigatedDate)) < 0 : true;\n  const nextMonthInBounds = maxDate ? compareDatePart(getMonthEnd(navigatedDate), maxDate) < 0 : true;\n\n  // use aria-disabled instead of disabled so focus is not lost\n  // when a prev/next button becomes disabled after being clicked\n  return (\n    <div className={classNames.monthComponents}>\n      <button\n        className={css(classNames.headerIconButton, {\n          [classNames.disabledStyle]: !prevMonthInBounds,\n        })}\n        tabIndex={prevMonthInBounds ? undefined : allFocusable ? 0 : -1}\n        aria-disabled={!prevMonthInBounds}\n        onClick={prevMonthInBounds ? onSelectPrevMonth : undefined}\n        onKeyDown={prevMonthInBounds ? onButtonKeyDown(onSelectPrevMonth) : undefined}\n        title={\n          strings.prevMonthAriaLabel\n            ? strings.prevMonthAriaLabel + ' ' + strings.months[addMonths(navigatedDate, -1).getMonth()]\n            : undefined\n        }\n        type=\"button\"\n      >\n        <Icon iconName={leftNavigationIcon} />\n      </button>\n      <button\n        className={css(classNames.headerIconButton, {\n          [classNames.disabledStyle]: !nextMonthInBounds,\n        })}\n        tabIndex={nextMonthInBounds ? undefined : allFocusable ? 0 : -1}\n        aria-disabled={!nextMonthInBounds}\n        onClick={nextMonthInBounds ? onSelectNextMonth : undefined}\n        onKeyDown={nextMonthInBounds ? onButtonKeyDown(onSelectNextMonth) : undefined}\n        title={\n          strings.nextMonthAriaLabel\n            ? strings.nextMonthAriaLabel + ' ' + strings.months[addMonths(navigatedDate, 1).getMonth()]\n            : undefined\n        }\n        type=\"button\"\n      >\n        <Icon iconName={rightNavigationIcon} />\n      </button>\n      {showCloseButton && (\n        <button\n          className={css(classNames.headerIconButton)}\n          onClick={onDismiss}\n          onKeyDown={onButtonKeyDown(onDismiss)}\n          title={strings.closeButtonAriaLabel}\n          type=\"button\"\n        >\n          <Icon iconName={closeNavigationIcon} />\n        </button>\n      )}\n    </div>\n  );\n};\nCalendarDayNavigationButtons.displayName = 'CalendarDayNavigationButtons';\n\nconst onButtonKeyDown = (\n  callback?: () => void,\n): ((ev: React.KeyboardEvent<HTMLButtonElement | HTMLDivElement>) => void) => (\n  ev: React.KeyboardEvent<HTMLButtonElement>,\n) => {\n  // eslint-disable-next-line deprecation/deprecation\n  switch (ev.which) {\n    case KeyCodes.enter:\n      callback?.();\n      break;\n  }\n};\n"]}