{"version":3,"file":"MaskedTextField.js","sourceRoot":"../src/","sources":["components/TextField/MaskedTextField/MaskedTextField.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { TextField } from '../TextField';\nimport { KeyCodes } from '../../../Utilities';\nimport {\n  clearNext,\n  clearPrev,\n  clearRange,\n  DEFAULT_MASK_FORMAT_CHARS,\n  getLeftFormatIndex,\n  getMaskDisplay,\n  getRightFormatIndex,\n  insertString,\n  parseMask,\n} from './inputMask';\nimport { useConst, useIsomorphicLayoutEffect } from '@fluentui/react-hooks';\nimport type { IMaskedTextFieldProps, IMaskedTextField } from '../TextField.types';\nimport type { IRefObject } from '../../../Utilities';\nimport type { IMaskValue } from './inputMask';\n\ninterface IMaskedTextFieldInternalState {\n  maskCharData: IMaskValue[];\n  isFocused: boolean;\n  moveCursorOnMouseUp: boolean;\n  changeSelectionData: {\n    changeType: 'default' | 'backspace' | 'delete' | 'textPasted';\n    selectionStart: number;\n    selectionEnd: number;\n  } | null;\n}\n\nconst COMPONENT_NAME = 'MaskedTextField';\n\nconst useComponentRef = (\n  componentRef: IRefObject<IMaskedTextField> | undefined,\n  internalState: IMaskedTextFieldInternalState,\n  textField: React.RefObject<IMaskedTextField>,\n) => {\n  React.useImperativeHandle(\n    componentRef,\n    (): IMaskedTextField => ({\n      get value() {\n        let value = '';\n\n        for (let i = 0; i < internalState.maskCharData.length; i++) {\n          if (!internalState.maskCharData[i].value) {\n            return undefined;\n          }\n          value += internalState.maskCharData[i].value;\n        }\n        return value;\n      },\n\n      get selectionStart(): number | null {\n        return textField.current && textField.current.selectionStart !== null ? textField.current.selectionStart : -1;\n      },\n\n      get selectionEnd(): number | null {\n        return textField.current && textField.current.selectionEnd ? textField.current.selectionEnd : -1;\n      },\n\n      focus(): void {\n        textField.current && textField.current.focus();\n      },\n\n      blur(): void {\n        textField.current && textField.current.blur();\n      },\n\n      select(): void {\n        textField.current && textField.current.select();\n      },\n\n      setSelectionStart(value: number): void {\n        textField.current && textField.current.setSelectionStart(value);\n      },\n\n      setSelectionEnd(value: number): void {\n        textField.current && textField.current.setSelectionEnd(value);\n      },\n\n      setSelectionRange(start: number, end: number): void {\n        textField.current && textField.current.setSelectionRange(start, end);\n      },\n    }),\n    [internalState, textField],\n  );\n};\n\nexport const DEFAULT_MASK_CHAR = '_';\n\nexport const MaskedTextField: React.FunctionComponent<IMaskedTextFieldProps> = React.forwardRef<\n  HTMLDivElement,\n  IMaskedTextFieldProps\n>((props, ref) => {\n  const textField = React.useRef<IMaskedTextField>(null);\n\n  const {\n    componentRef,\n    onFocus,\n    onBlur,\n    onMouseDown,\n    onMouseUp,\n    onChange,\n    onPaste,\n    onKeyDown,\n    mask,\n    maskChar = DEFAULT_MASK_CHAR,\n    maskFormat = DEFAULT_MASK_FORMAT_CHARS,\n    value,\n  } = props;\n\n  const internalState = useConst<IMaskedTextFieldInternalState>(() => ({\n    maskCharData: parseMask(mask, maskFormat),\n    isFocused: false,\n    moveCursorOnMouseUp: false,\n    changeSelectionData: null,\n  }));\n\n  /** The index into the rendered value of the first unfilled format character */\n  const [maskCursorPosition, setMaskCursorPosition] = React.useState<number | undefined>();\n\n  /**\n   * The mask string formatted with the input value.\n   * This is what is displayed inside the TextField\n   * @example\n   *  `Phone Number: 12_ - 4___`\n   */\n  const [displayValue, setDisplayValue] = React.useState<string>(() =>\n    getMaskDisplay(mask, internalState.maskCharData, maskChar),\n  );\n\n  const setValue = React.useCallback(\n    (newValue: string): void => {\n      let valueIndex = 0;\n      let charDataIndex = 0;\n\n      while (valueIndex < newValue.length && charDataIndex < internalState.maskCharData.length) {\n        // Test if the next character in the new value fits the next format character\n        const testVal = newValue[valueIndex];\n        if (internalState.maskCharData[charDataIndex].format.test(testVal)) {\n          internalState.maskCharData[charDataIndex].value = testVal;\n          charDataIndex++;\n        }\n        valueIndex++;\n      }\n    },\n    [internalState],\n  );\n\n  const handleFocus = React.useCallback(\n    (ev: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      onFocus?.(ev);\n      internalState.isFocused = true;\n\n      // Move the cursor position to the leftmost unfilled position\n      for (let i = 0; i < internalState.maskCharData.length; i++) {\n        if (!internalState.maskCharData[i].value) {\n          setMaskCursorPosition(internalState.maskCharData[i].displayIndex);\n          break;\n        }\n      }\n    },\n    [internalState, onFocus],\n  );\n\n  const handleBlur = React.useCallback(\n    (ev: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n      onBlur?.(ev);\n      internalState.isFocused = false;\n      internalState.moveCursorOnMouseUp = true;\n    },\n    [internalState, onBlur],\n  );\n\n  const handleMouseDown = React.useCallback(\n    (ev: React.MouseEvent<HTMLInputElement>) => {\n      onMouseDown?.(ev);\n      if (!internalState.isFocused) {\n        internalState.moveCursorOnMouseUp = true;\n      }\n    },\n    [internalState, onMouseDown],\n  );\n\n  const handleMouseUp = React.useCallback(\n    (ev: React.MouseEvent<HTMLInputElement>) => {\n      onMouseUp?.(ev);\n      // Move the cursor on mouseUp after focusing the textField\n      if (internalState.moveCursorOnMouseUp) {\n        internalState.moveCursorOnMouseUp = false;\n        // Move the cursor position to the rightmost unfilled position\n        for (let i = 0; i < internalState.maskCharData.length; i++) {\n          if (!internalState.maskCharData[i].value) {\n            setMaskCursorPosition(internalState.maskCharData[i].displayIndex);\n            break;\n          }\n        }\n      }\n    },\n    [internalState, onMouseUp],\n  );\n\n  const handleInputChange = React.useCallback(\n    (ev: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, inputValue: string) => {\n      if (internalState.changeSelectionData === null && textField.current) {\n        internalState.changeSelectionData = {\n          changeType: 'default',\n          selectionStart: textField.current.selectionStart !== null ? textField.current.selectionStart : -1,\n          selectionEnd: textField.current.selectionEnd !== null ? textField.current.selectionEnd : -1,\n        };\n      }\n      if (!internalState.changeSelectionData) {\n        return;\n      }\n\n      // The initial value of cursorPos does not matter\n      let cursorPos = 0;\n      const { changeType, selectionStart, selectionEnd } = internalState.changeSelectionData;\n\n      if (changeType === 'textPasted') {\n        const charsSelected = selectionEnd - selectionStart;\n        const charCount = inputValue.length + charsSelected - displayValue.length;\n        const startPos = selectionStart;\n        const pastedString = inputValue.substr(startPos, charCount);\n\n        // Clear any selected characters\n        if (charsSelected) {\n          internalState.maskCharData = clearRange(internalState.maskCharData, selectionStart, charsSelected);\n        }\n        cursorPos = insertString(internalState.maskCharData, startPos, pastedString);\n      } else if (changeType === 'delete' || changeType === 'backspace') {\n        // isDel is true If the characters are removed LTR, otherwise RTL\n        const isDel = changeType === 'delete';\n        const charCount = selectionEnd - selectionStart;\n\n        if (charCount) {\n          // charCount is > 0 if range was deleted\n          internalState.maskCharData = clearRange(internalState.maskCharData, selectionStart, charCount);\n          cursorPos = getRightFormatIndex(internalState.maskCharData, selectionStart);\n        } else {\n          // If charCount === 0, there was no selection and a single character was deleted\n          if (isDel) {\n            internalState.maskCharData = clearNext(internalState.maskCharData, selectionStart);\n            cursorPos = getRightFormatIndex(internalState.maskCharData, selectionStart);\n          } else {\n            internalState.maskCharData = clearPrev(internalState.maskCharData, selectionStart);\n            cursorPos = getLeftFormatIndex(internalState.maskCharData, selectionStart);\n          }\n        }\n      } else if (inputValue.length > displayValue.length) {\n        // This case is if the user added characters\n        const charCount = inputValue.length - displayValue.length;\n        const startPos = selectionEnd - charCount;\n        const enteredString = inputValue.substr(startPos, charCount);\n\n        cursorPos = insertString(internalState.maskCharData, startPos, enteredString);\n      } else if (inputValue.length <= displayValue.length) {\n        /**\n         * This case is reached only if the user has selected a block of 1 or more\n         * characters and input a character replacing the characters they've selected.\n         */\n        const charCount = 1;\n        const selectCount = displayValue.length + charCount - inputValue.length;\n        const startPos = selectionEnd - charCount;\n        const enteredString = inputValue.substr(startPos, charCount);\n\n        // Clear the selected range\n        internalState.maskCharData = clearRange(internalState.maskCharData, startPos, selectCount);\n        // Insert the printed character\n        cursorPos = insertString(internalState.maskCharData, startPos, enteredString);\n      }\n\n      internalState.changeSelectionData = null;\n\n      const newValue = getMaskDisplay(mask, internalState.maskCharData, maskChar);\n\n      setDisplayValue(newValue);\n      setMaskCursorPosition(cursorPos);\n\n      // Perform onChange after input has been processed. Return value is expected to be the displayed text\n      onChange?.(ev, newValue);\n    },\n    [displayValue.length, internalState, mask, maskChar, onChange],\n  );\n\n  const handleKeyDown = React.useCallback(\n    (ev: React.KeyboardEvent<HTMLInputElement>) => {\n      onKeyDown?.(ev);\n\n      internalState.changeSelectionData = null;\n      if (textField.current && textField.current.value) {\n        // eslint-disable-next-line deprecation/deprecation\n        const { keyCode, ctrlKey, metaKey } = ev;\n\n        // Ignore ctrl and meta keydown\n        if (ctrlKey || metaKey) {\n          return;\n        }\n\n        // On backspace or delete, store the selection and the keyCode\n        if (keyCode === KeyCodes.backspace || keyCode === KeyCodes.del) {\n          const selectionStart = (ev.target as HTMLInputElement).selectionStart;\n          const selectionEnd = (ev.target as HTMLInputElement).selectionEnd;\n\n          // Check if backspace or delete press is valid.\n          if (\n            !(keyCode === KeyCodes.backspace && selectionEnd && selectionEnd > 0) &&\n            !(keyCode === KeyCodes.del && selectionStart !== null && selectionStart < textField.current.value.length)\n          ) {\n            return;\n          }\n\n          internalState.changeSelectionData = {\n            changeType: keyCode === KeyCodes.backspace ? 'backspace' : 'delete',\n            selectionStart: selectionStart !== null ? selectionStart : -1,\n            selectionEnd: selectionEnd !== null ? selectionEnd : -1,\n          };\n        }\n      }\n    },\n    [internalState, onKeyDown],\n  );\n\n  const handlePaste = React.useCallback(\n    (ev: React.ClipboardEvent<HTMLInputElement>) => {\n      onPaste?.(ev);\n\n      const selectionStart = (ev.target as HTMLInputElement).selectionStart;\n      const selectionEnd = (ev.target as HTMLInputElement).selectionEnd;\n      // Store the paste selection range\n      internalState.changeSelectionData = {\n        changeType: 'textPasted',\n        selectionStart: selectionStart !== null ? selectionStart : -1,\n        selectionEnd: selectionEnd !== null ? selectionEnd : -1,\n      };\n    },\n    [internalState, onPaste],\n  );\n\n  // Updates the display value if mask or value props change.\n  React.useEffect(() => {\n    internalState.maskCharData = parseMask(mask, maskFormat);\n    value !== undefined && setValue(value);\n    setDisplayValue(getMaskDisplay(mask, internalState.maskCharData, maskChar));\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- Should only update when mask or value changes.\n  }, [mask, value]);\n\n  // Run before browser paint to avoid flickering from selection reset.\n  useIsomorphicLayoutEffect(() => {\n    // Move the cursor to position before paint.\n    if (maskCursorPosition !== undefined && textField.current) {\n      textField.current.setSelectionRange(maskCursorPosition, maskCursorPosition);\n    }\n  }, [maskCursorPosition]);\n\n  // Run after browser paint.\n  React.useEffect(() => {\n    // Move the cursor to the start of the mask format after values update.\n    if (internalState.isFocused && maskCursorPosition !== undefined && textField.current) {\n      textField.current.setSelectionRange(maskCursorPosition, maskCursorPosition);\n    }\n  });\n\n  useComponentRef(componentRef, internalState, textField);\n\n  return (\n    <TextField\n      {...props}\n      elementRef={ref}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      onMouseDown={handleMouseDown}\n      onMouseUp={handleMouseUp}\n      onChange={handleInputChange}\n      onKeyDown={handleKeyDown}\n      onPaste={handlePaste}\n      value={displayValue || ''}\n      componentRef={textField}\n    />\n  );\n});\nMaskedTextField.displayName = COMPONENT_NAME;\n"]}