{"version":3,"file":"useLink.js","sourceRoot":"../src/","sources":["components/Link/useLink.ts"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useMergedRefs } from '@fluentui/react-hooks';\nimport { classNamesFunction, useFocusRects } from '@fluentui/utilities';\nimport type { ILink, ILinkProps, ILinkStyleProps, ILinkStyles } from './Link.types';\n\nconst getClassNames = classNamesFunction<ILinkStyleProps, ILinkStyles>();\n\n/**\n * The useLink hook processes the Link component props and returns\n * state, slots and slotProps for consumption by the component.\n */\nexport const useLink = (props: ILinkProps, forwardedRef: React.Ref<HTMLElement>): any => {\n  const { as, className, disabled, href, onClick, styles, theme, underline } = props;\n  const rootRef = React.useRef<HTMLDivElement | null>(null);\n  const mergedRootRefs: React.Ref<HTMLElement> = useMergedRefs(rootRef, forwardedRef);\n\n  useComponentRef(props, rootRef);\n  useFocusRects(rootRef);\n\n  const classNames = getClassNames(styles!, {\n    className,\n    isButton: !href,\n    isDisabled: disabled,\n    isUnderlined: underline,\n    theme: theme!,\n  });\n\n  const _onClick = (ev: React.MouseEvent<HTMLAnchorElement | HTMLButtonElement>) => {\n    if (disabled) {\n      ev.preventDefault();\n    } else if (onClick) {\n      onClick(ev);\n    }\n  };\n\n  const rootType = as ? as : href ? 'a' : 'button';\n\n  const state = {};\n  const slots = { root: rootType };\n  const slotProps = {\n    root: {\n      ...adjustPropsForRootType(rootType, props),\n      'aria-disabled': disabled,\n      className: classNames.root,\n      onClick: _onClick,\n      ref: mergedRootRefs,\n    },\n  };\n\n  return { state, slots, slotProps };\n};\n\nconst useComponentRef = (props: ILinkProps, link: React.RefObject<ILink>) => {\n  React.useImperativeHandle(\n    props.componentRef,\n    () => ({\n      focus() {\n        if (link.current) {\n          link.current.focus();\n        }\n      },\n    }),\n    [link],\n  );\n};\n\nconst adjustPropsForRootType = (\n  RootType: string | React.ComponentClass | React.FunctionComponent,\n  props: ILinkProps & { getStyles?: any },\n): Partial<ILinkProps> => {\n  // Deconstruct the props so we remove props like `as`, `theme` and `styles`\n  // as those will always be removed. We also take some props that are optional\n  // based on the RootType.\n  const { as, disabled, target, href, theme, getStyles, styles, componentRef, underline, ...restProps } = props;\n\n  // RootType will be a string if we're dealing with an html component\n  if (typeof RootType === 'string') {\n    // Remove the disabled prop for anchor elements\n    if (RootType === 'a') {\n      return {\n        target,\n        href: disabled ? undefined : href,\n        ...restProps,\n      };\n    }\n\n    // Add the type='button' prop for button elements\n    if (RootType === 'button') {\n      return {\n        type: 'button',\n        disabled,\n        ...restProps,\n      };\n    }\n\n    // Remove the target and href props for all other non anchor elements\n    return { ...restProps, disabled };\n  }\n\n  // Retain all props except 'as' for ReactComponents\n  return { target, href, disabled, ...restProps };\n};\n"]}